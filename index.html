<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://good19961106.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/breeze-blog/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/breeze-blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/breeze-blog/css/style.css">

  
    
<link rel="stylesheet" href="/breeze-blog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/breeze-blog/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/breeze-blog/">Home</a>
        
          <a class="main-nav-link" href="/breeze-blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/breeze-blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://good19961106.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-picture/go-draw-word-in-pic2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2021/01/05/picture/go-draw-word-in-pic2/" class="article-date">
  <time class="dt-published" datetime="2021-01-05T07:04:39.315Z" itemprop="datePublished">2021-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2021/01/05/picture/go-draw-word-in-pic2/" data-id="ckjjnjnbc0000a8wcdk4fbycj" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2021/01/05/hello-world/" class="article-date">
  <time class="dt-published" datetime="2021-01-05T04:36:01.741Z" itemprop="datePublished">2021-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2021/01/05/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2021/01/05/hello-world/" data-id="ckjjnjnbs0002a8wceb1zbyb0" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-picture/go-draw-word-in-pic" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2020/12/20/picture/go-draw-word-in-pic/" class="article-date">
  <time class="dt-published" datetime="2020-12-20T13:45:35.000Z" itemprop="datePublished">2020-12-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2020/12/20/picture/go-draw-word-in-pic/">【Go语言绘图】图片添加文字（一）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>前一篇讲解了利用gg包来进行图片旋转的操作，这一篇我们来看看怎么在图片上添加文字。</p>
<h2 id="绘制纯色背景"><a href="#绘制纯色背景" class="headerlink" title="绘制纯色背景"></a>绘制纯色背景</h2><p>首先，我们先绘制一个纯白色的背景，作为添加文字的背景板。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/fogleman/gg&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">const</span> S = <span class="number">1024</span></span><br><span class="line">	dc := gg.NewContext(S, S)</span><br><span class="line">	dc.SetRGB(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">	dc.Clear()</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;out.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出图片如下：</p>
<p><img src="1.png"></p>
<p>这样我就得到了一张纯青色的背景图。回顾一下上一篇里绘制背景图的步骤：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRotateImage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	width := <span class="number">1000</span></span><br><span class="line">	height := <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">	dc := gg.NewContext(width, height)</span><br><span class="line">	dc.DrawRectangle(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">float64</span>(width), <span class="keyword">float64</span>(width))</span><br><span class="line">	dc.SetRGB255(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">	dc.Fill()</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;test.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们是通过先绘制跟画布同样大小的矩形，然后将它的颜色进行填充来实现纯色背景效果的，但实际上使用 <code>Clear()</code> 方法便能直接使用当前颜色对画布进行填充。</p>
<p>查看一下 <code>Clear()</code> 方法便能发现，里面是通过调用 <code>draw.Draw()</code> 函数来实现的，这也是go语言自带的 <code>image</code> 包里很有用的一个函数，后面会有文章来做更详细的介绍。简单来说，<code>Clear()</code> 方法是通过调用<code>draw.Draw()</code> 函数，通过将纯色图片覆盖到原画布的方式来实现纯色背景的效果的。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Clear fills the entire image with the current color.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dc *Context)</span> <span class="title">Clear</span><span class="params">()</span></span> &#123;</span><br><span class="line">	src := image.NewUniform(dc.color)</span><br><span class="line">	draw.Draw(dc.im, dc.im.Bounds(), src, image.ZP, draw.Src)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="添加文字"><a href="#添加文字" class="headerlink" title="添加文字"></a>添加文字</h2><p>背景板已经准备就绪，接下来，我们来添加一些文字。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/fogleman/gg&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">const</span> S = <span class="number">1024</span></span><br><span class="line">	dc := gg.NewContext(S, S)</span><br><span class="line">	dc.SetRGB(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">	dc.Clear()</span><br><span class="line">	dc.SetRGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">if</span> err := dc.LoadFontFace(<span class="string">&quot;gilmer-heavy.ttf&quot;</span>, <span class="number">120</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	dc.DrawString(<span class="string">&quot;Hello, world!&quot;</span>, <span class="number">0</span>, S/<span class="number">2</span>)</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;out.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出如下，一个硕大、黑色的“Hello, World!”就出现在了图片中央。</p>
<p><img src="2.png"></p>
<p>这里我们添加了三个步骤，首先是设置了字体颜色为黑色。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dc.SetRGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>然后加载了字体文件，这里需要注意的是，通过 <code>LoadFontFace()</code> 方法加载的字体文件只支持 <code>ttf</code> 后缀的文件，也就是 <code>true type font</code>，</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := dc.LoadFontFace(<span class="string">&quot;gilmer-heavy.ttf&quot;</span>, <span class="number">120</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>里面的实现也比较简单：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dc *Context)</span> <span class="title">LoadFontFace</span><span class="params">(path <span class="keyword">string</span>, points <span class="keyword">float64</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	face, err := LoadFontFace(path, points)</span><br><span class="line">	<span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">		dc.fontFace = face</span><br><span class="line">		dc.fontHeight = points * <span class="number">72</span> / <span class="number">96</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>内部调用了 <code>LoadFontFace()</code> 函数，在这个函数内部进行了字体文件读取，并用 <code>freetype</code> 包里的<code>Parse()</code>函数进行字体的加载，最后在调用 <code>NewFace()</code> 函数来创建一个 <code>font.Face</code> 对象，在外面的<code>LoadFontFace()</code>方法里，将这个对象保存在 <code>fontFace</code> 字段中，并且根据传入的<code>point</code>大小设置了一下字体高度。</p>
<p>至于为什么是乘以<code>72</code>然后除以<code>96</code>，这个查了一下资料，简单的说，字体的大小单位磅(<code>points</code>) 是<code>1/72</code>逻辑英寸，屏幕的分辨率是<code>96DPI</code>（96点每逻辑英寸），那么屏幕每个点就是<code>72/96</code>=<code>0.75</code>磅。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">LoadFontFace</span><span class="params">(path <span class="keyword">string</span>, points <span class="keyword">float64</span>)</span> <span class="params">(font.Face, error)</span></span> &#123;</span><br><span class="line">	fontBytes, err := ioutil.ReadFile(path)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	f, err := truetype.Parse(fontBytes)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	face := truetype.NewFace(f, &amp;truetype.Options&#123;</span><br><span class="line">		Size: points,</span><br><span class="line">		<span class="comment">// Hinting: font.HintingFull,</span></span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="keyword">return</span> face, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="调整字体大小"><a href="#调整字体大小" class="headerlink" title="调整字体大小"></a>调整字体大小</h3><p>如果想调整字体大小，也很简单，只需要调整<code>LoadFontFace()</code> 方法传入的值即可，让我们来调大一点字体看看效果。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := dc.LoadFontFace(<span class="string">&quot;gilmer-heavy.ttf&quot;</span>, <span class="number">240</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="3.png"></p>
<p>这样就大很多了。不知道聪明的你注意到了没有，在调用<code>dc.DrawString(&quot;Hello, world!&quot;, 0, S/2)</code>时，我们设置的坐标是 <code>(0, S/2)</code> ，也就是左侧边的正中心点，<strong>这个位置刚好是绘制出来的文字的左下角的坐标</strong>，这是需要注意的一点。</p>
<h3 id="居中显示"><a href="#居中显示" class="headerlink" title="居中显示"></a>居中显示</h3><p>如果想要文字居中显示怎么办呢？比如我们想要这个 <code>Hello,World!</code> 显示在图片的正中央，要怎么处理呢？一个笨办法当然是通过调整字体位置来实现这个效果，让我们先来试试：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := dc.LoadFontFace(<span class="string">&quot;gilmer-heavy.ttf&quot;</span>, <span class="number">120</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">dc.DrawString(<span class="string">&quot;Hello, world!&quot;</span>, <span class="number">130</span>, S/<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p><img src="4.png"></p>
<p>通过多次调整，字体大小设置为<code>120</code>时，<code>x</code>的位置设置为<code>130</code>，基本上可以看起来是居中的。但这样的话每次换文字都得反复调整位置，显然不科学。</p>
<p>别慌，有一个方法可以得到文字的宽度，<code>MeasureString()</code> 可以得到在当前字体下指定字符串的宽度和高度，这个高度其实就是前面通过 <code>points * 72 / 96</code> 计算得到的，然后我们再将左下角的位置设置为<code>((S-sWidth)/2, (S+sHeight)/2)</code>即可实现文字居中的效果，注意y轴坐标是<code>(S+sHeight)/2</code>，因为文字的左上顶点位置y轴坐标应该是<code>(S-sHeight)/2</code>，左下顶点坐标只需要再加上字体高度即可得出。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="string">&quot;Hello, world!&quot;</span></span><br><span class="line">sWidth, sHeight := dc.MeasureString(s)</span><br><span class="line">dc.DrawString(s, (S-sWidth)/<span class="number">2</span>, (S+sHeight)/<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p><img src="5.png"></p>
<p>这样看来，居中显示也不过如此嘛。但别高兴的太早，有没有想过，如果文字过长该怎么处理？比如我们来调整一下文字内容，再看下生成的效果。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="string">&quot;Hello,world! Hello,ByteDancer!&quot;</span></span><br></pre></td></tr></table></figure>
<p><img src="6.png"></p>
<p>文字已经超出边界了，显然不是理想的效果，这个时候有两种处理方法，一种是添加省略号，一种是换行。</p>
<h3 id="单行长文本处理"><a href="#单行长文本处理" class="headerlink" title="单行长文本处理"></a>单行长文本处理</h3><p>先来说一下添加省略号的处理方案，听起来好像挺简单，但实际上处理起来也挺麻烦的。</p>
<p>首先需要确定一个文字展示的最大宽度，因为如果满打满算整行都塞满文字显然不好看。其次是要逐个字符进行宽度计算，并判断是否会超过最大宽度，最后截取并保留刚好小于最大宽度时的字符串（需要考虑省略号的宽度）。</p>
<p>我们来逐个处理。首先拍脑袋定一个文字最大宽度为图片宽度的<code>0.75</code>倍。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">maxTextWidth := S * <span class="number">0.75</span></span><br></pre></td></tr></table></figure>
<p>然后来逐个字符计算宽度，直到刚好大于最大宽度为止。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TruncateText</span><span class="params">(dc *gg.Context, originalText <span class="keyword">string</span>, maxTextWidth <span class="keyword">float64</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	tmpStr := <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(originalText); i++ &#123;</span><br><span class="line">		tmpStr = tmpStr + <span class="keyword">string</span>(originalText[i])</span><br><span class="line">		w, _ := dc.MeasureString(tmpStr)</span><br><span class="line">		<span class="keyword">if</span> w &gt; maxTextWidth &#123;</span><br><span class="line">			<span class="keyword">return</span> tmpStr[<span class="number">0</span> : i<span class="number">-1</span>]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> tmpStr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后我们调整一下调用的地方。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">const</span> S = <span class="number">1024</span></span><br><span class="line">	dc := gg.NewContext(S, S)</span><br><span class="line">	dc.SetRGB(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">	dc.Clear()</span><br><span class="line">	dc.SetRGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">if</span> err := dc.LoadFontFace(<span class="string">&quot;gilmer-heavy.ttf&quot;</span>, <span class="number">120</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	s := <span class="string">&quot;Hello,world! Hello,ByteDancer!&quot;</span></span><br><span class="line">	ellipsisWidth, _ := dc.MeasureString(<span class="string">&quot;...&quot;</span>)</span><br><span class="line">	maxTextWidth := S * <span class="number">0.75</span></span><br><span class="line">	s = TruncateText(dc, s, maxTextWidth - ellipsisWidth) + <span class="string">&quot;...&quot;</span></span><br><span class="line">	fmt.Println(s)</span><br><span class="line">	sWidth, sHeight := dc.MeasureString(s)</span><br><span class="line"></span><br><span class="line">	dc.DrawString(s, (S-sWidth)/<span class="number">2</span>, (S+sHeight)/<span class="number">2</span>)</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;out.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里我们先计算了省略号的宽度，然后用最大字符串宽度减去省略号宽度作为最大宽度传入，得到最终要展示的字符串。生成的效果如下：</p>
<p><img src="7.png"></p>
<p>看起来好像没什么毛病，但如果我们把文字换成中文，情况可能就不一样了。我们换一个中文字体，然后把字符串设置成中文。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := dc.LoadFontFace(<span class="string">&quot;方正楷体简体.ttf&quot;</span>, <span class="number">120</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">s := <span class="string">&quot;如果我们把文字换成中文&quot;</span></span><br></pre></td></tr></table></figure>
<p>就变成了这个样子。</p>
<p><img src="8.png"></p>
<p>发现图片上只剩下了省略号，原因是中文字符串分割不正确导致出现了乱码，而这个乱码在字体里找不到对应的文字，所以无法展示。这时，需要先将字符串先转化为<code>rune</code>数组，或者通过直接对字符串使用 <code>for range</code> 遍历，可以避免在中文的情况出现乱码的情况。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TruncateText</span><span class="params">(dc *gg.Context, originalText <span class="keyword">string</span>, maxTextWidth <span class="keyword">float64</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	tmpStr := <span class="string">&quot;&quot;</span></span><br><span class="line">	result := <span class="built_in">make</span>([]<span class="keyword">rune</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">for</span> _, r := <span class="keyword">range</span> originalText &#123;</span><br><span class="line">		tmpStr = tmpStr + <span class="keyword">string</span>(r)</span><br><span class="line">		w, _ := dc.MeasureString(tmpStr)</span><br><span class="line">		<span class="keyword">if</span> w &gt; maxTextWidth &#123;</span><br><span class="line">			<span class="keyword">if</span> <span class="built_in">len</span>(tmpStr) &lt;= <span class="number">1</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			result = <span class="built_in">append</span>(result, r)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">string</span>(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样文字就能按照我们的预期进行展示了。</p>
<p><img src="9.png"></p>
<h3 id="多行文本处理"><a href="#多行文本处理" class="headerlink" title="多行文本处理"></a>多行文本处理</h3><p>接下来，我们来看看怎么处理多行文本，即当一行文字展示不下时，把文字切割成多行进行展示。如果我们仍旧使用之前的方法来处理的话，就需要先计算好每行展示的字以及行数，然后再进行展示。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/fogleman/gg&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">const</span> S = <span class="number">1024</span></span><br><span class="line">	dc := gg.NewContext(S, S)</span><br><span class="line">	dc.SetRGB(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">	dc.Clear()</span><br><span class="line">	dc.SetRGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">if</span> err := dc.LoadFontFace(<span class="string">&quot;/Users/bytedance/Downloads/方正楷体简体.ttf&quot;</span>, <span class="number">120</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	s := <span class="string">&quot;这是我的一个秘密，再简单不过的秘密：一个人只有用心去看，才能看到真实。事情的真相只用眼睛是看不见的。        --《小王子》&quot;</span></span><br><span class="line">	ellipsisWidth, _ := dc.MeasureString(<span class="string">&quot;...&quot;</span>)</span><br><span class="line"></span><br><span class="line">	maxTextWidth := S * <span class="number">0.9</span></span><br><span class="line">	lineSpace := <span class="number">25.0</span></span><br><span class="line">	maxLine := <span class="keyword">int</span>(S / (dc.FontHeight() + lineSpace))</span><br><span class="line"></span><br><span class="line">	line := <span class="number">0</span></span><br><span class="line">	lineTexts := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">for</span> <span class="built_in">len</span>(s) &gt; <span class="number">0</span> &#123;</span><br><span class="line">		line++</span><br><span class="line">		<span class="keyword">if</span> line &gt; maxLine &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> line == maxLine &#123;</span><br><span class="line">			sw, _ := dc.MeasureString(s)</span><br><span class="line">			<span class="keyword">if</span> sw &gt; maxTextWidth &#123;</span><br><span class="line">				maxTextWidth -= ellipsisWidth</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		lineText := TruncateText(dc, s, maxTextWidth)</span><br><span class="line">		<span class="keyword">if</span> line == maxLine &amp;&amp; <span class="built_in">len</span>(lineText) &lt; <span class="built_in">len</span>(s) &#123;</span><br><span class="line">			lineText += <span class="string">&quot;...&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">		lineTexts = <span class="built_in">append</span>(lineTexts, lineText)</span><br><span class="line">		<span class="keyword">if</span> <span class="built_in">len</span>(lineText) &gt;= <span class="built_in">len</span>(s) &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		s = s[<span class="built_in">len</span>(lineText):]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	lineY := (S - dc.FontHeight()*<span class="keyword">float64</span>(<span class="built_in">len</span>(lineTexts)) - lineSpace*<span class="keyword">float64</span>(<span class="built_in">len</span>(lineTexts)<span class="number">-1</span>)) / <span class="number">2</span></span><br><span class="line">	lineY += dc.FontHeight()</span><br><span class="line">	<span class="keyword">for</span> _, text := <span class="keyword">range</span> lineTexts &#123;</span><br><span class="line">		sWidth, _ := dc.MeasureString(text)</span><br><span class="line">		lineX := (S - sWidth) / <span class="number">2</span></span><br><span class="line">		dc.DrawString(text, lineX, lineY)</span><br><span class="line">		lineY += dc.FontHeight() + lineSpace</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dc.SavePNG(<span class="string">&quot;out.png&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TruncateText</span><span class="params">(dc *gg.Context, originalText <span class="keyword">string</span>, maxTextWidth <span class="keyword">float64</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	tmpStr := <span class="string">&quot;&quot;</span></span><br><span class="line">	result := <span class="built_in">make</span>([]<span class="keyword">rune</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">for</span> _, r := <span class="keyword">range</span> originalText &#123;</span><br><span class="line">		tmpStr = tmpStr + <span class="keyword">string</span>(r)</span><br><span class="line">		w, _ := dc.MeasureString(tmpStr)</span><br><span class="line">		<span class="keyword">if</span> w &gt; maxTextWidth &#123;</span><br><span class="line">			<span class="keyword">if</span> <span class="built_in">len</span>(tmpStr) &lt;= <span class="number">1</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			result = <span class="built_in">append</span>(result, r)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">string</span>(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段逻辑其实也很简单，首先根据行高和行间距计算出当前图片最多能展示多少行字，然后遍历需要展示的字符串进行逐行截取，截取出一行行的文字来。</p>
<p>遍历时有一个小细节，那就是判断是否已经到达最后一行，如果到达最后一行，则要考虑是否添加省略号了。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果已经是最后一行，则需要判断剩余字符串是否仍旧超过最大宽度</span></span><br><span class="line"><span class="keyword">if</span> line == maxLine &#123;</span><br><span class="line">    sw, _ := dc.MeasureString(s)</span><br><span class="line">    <span class="comment">// 如果超过则需要在末尾添加省略号，截取的最大宽度需要减去省略号的宽度</span></span><br><span class="line">    <span class="keyword">if</span> sw &gt; maxTextWidth &#123;</span><br><span class="line">        maxTextWidth -= ellipsisWidth</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">lineText := TruncateText(dc, s, maxTextWidth)</span><br><span class="line"><span class="comment">// 如果是最后一行并且文字仍旧是被截取过，那么在末尾添加省略号</span></span><br><span class="line"><span class="keyword">if</span> line == maxLine &amp;&amp; <span class="built_in">len</span>(lineText) &lt; <span class="built_in">len</span>(s) &#123;</span><br><span class="line">    lineText += <span class="string">&quot;...&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在绘制文本时，先考虑整个文本框的左上顶点位置，因为需要居中展示，每一行的宽度是变化的，X轴坐标是不确定的，但是Y轴坐标是可以先计算出来的，因为每一行的高度和行间距我们都已经知道了。整个文本框的高度就是<code>dc.FontHeight()*float64(len(lineTexts)) - lineSpace*float64(len(lineTexts)-1))</code> ，用图片高度减去文本框高度再除以2，就能得到左上顶点高度了。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineY := (S - dc.FontHeight()*<span class="keyword">float64</span>(<span class="built_in">len</span>(lineTexts)) - lineSpace*<span class="keyword">float64</span>(<span class="built_in">len</span>(lineTexts)<span class="number">-1</span>)) / <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>然后开始逐行绘制文字，计算每一行的左下顶点X轴和Y轴坐标即可。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lineY += dc.FontHeight()</span><br><span class="line"><span class="keyword">for</span> _, text := <span class="keyword">range</span> lineTexts &#123;</span><br><span class="line">    sWidth, _ := dc.MeasureString(text)</span><br><span class="line">    lineX := (S - sWidth) / <span class="number">2</span></span><br><span class="line">    dc.DrawString(text, lineX, lineY)</span><br><span class="line">    lineY += dc.FontHeight() + lineSpace</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后的效果如下图：</p>
<p><img src="10.png"></p>
<p>这样虽然实现了效果，但是显然有些太过复杂，我们还能再简化一下这个过程。</p>
<p>在gg库中，还有两个方法可以绘制文字，<code>DrawStringAnchored()</code> 和 <code>DrawStringWrapped()</code>。前者可以在指定一个点为偏移起点。后者则类似于一个文本框的效果，可以指定文本框中心点和文本框宽度，这些将在下一篇中进行介绍。</p>
<p>这里的处理没有考虑原文本中有换行符的情况，所以其实还不够完善，在处理时可以先对文本进行换行符分割，然后再依次进行上述处理。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>这一篇中，主要讲解了如何在纯色背景图上进行文字的绘制，说明了 <code>DrawString()</code> 方法和 <code>MeasureString()</code> 的使用，并利用它们来实现了文字居中的效果。在下一篇中，将对通过另外几个方法的讲解来了解文字绘制的更多技巧。</p>
<p>如果本篇内容对你有帮助，别忘了点赞关注加收藏～</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2020/12/20/picture/go-draw-word-in-pic/" data-id="ckjjnjnc9000ha8wc5eve99js" data-title="【Go语言绘图】图片添加文字（一）" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/go/" rel="tag">go</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-picture/go-pic-rotate-use-gg-package" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2020/12/16/picture/go-pic-rotate-use-gg-package/" class="article-date">
  <time class="dt-published" datetime="2020-12-16T13:50:00.000Z" itemprop="datePublished">2020-12-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2020/12/16/picture/go-pic-rotate-use-gg-package/">【Go语言绘图】图片的旋转</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在上一篇中，我们了解了gg库的基本使用，包括调整大小、调整圆形参数、设置颜色、保存图片、加载图片和裁剪。这一篇我们来学习一下图片的旋转。</p>
<h2 id="加载图片"><a href="#加载图片" class="headerlink" title="加载图片"></a>加载图片</h2><p>首先，我们先来一张黄图。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRotateImage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	width := <span class="number">1000</span></span><br><span class="line">	height := <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">	dc := gg.NewContext(width, height)</span><br><span class="line">	dc.DrawRectangle(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">float64</span>(width), <span class="keyword">float64</span>(width))</span><br><span class="line">	dc.SetRGB255(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">	dc.Fill()</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;test.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="1.png"></p>
<p>然后加载好我们要旋转的图片，用的仍旧是我们上一篇中使用的图。</p>
<p><img src="2.png"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRotateImage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	im, err := gg.LoadImage(<span class="string">&quot;/Users/bytedance/Desktop/test.png&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	w := im.Bounds().Size().X</span><br><span class="line">	h := im.Bounds().Size().Y</span><br><span class="line"></span><br><span class="line">	width := <span class="number">2</span> * w</span><br><span class="line">	height := <span class="number">2</span> * h</span><br><span class="line"></span><br><span class="line">	dc := gg.NewContext(width, height)</span><br><span class="line">	dc.DrawRectangle(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">float64</span>(width), <span class="keyword">float64</span>(width))</span><br><span class="line">	dc.SetRGB255(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">	dc.Fill()</span><br><span class="line"></span><br><span class="line">	dc.DrawImage(im, width/<span class="number">4</span>, height/<span class="number">4</span>)</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;test.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里为了更好的看到旋转的效果，对之前的代码做了一些调整。把画布大小设置为2倍图片的长宽。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">width := <span class="number">2</span> * w</span><br><span class="line">height := <span class="number">2</span> * h</span><br><span class="line"></span><br><span class="line">dc := gg.NewContext(width, height)</span><br></pre></td></tr></table></figure>
<p>然后绘制了一个矩形，并且将它的颜色填充为黄色（因为图片比较白，用黑色背景更容易看到边界）。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dc.DrawRectangle(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">float64</span>(<span class="number">2</span>*h), <span class="keyword">float64</span>(<span class="number">2</span>*w))</span><br><span class="line">dc.SetRGB255(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">dc.Fill()</span><br></pre></td></tr></table></figure>
<p>顺便纠正一下上一篇中的遗漏的点，使用 <code>setRGB()</code> 方法来设置颜色确实需要使用转换函数来将RGB值进行映射，但还有另一个方法 <code>SetRGB255()</code> 可以直接设置RGB值，就不需要先进行一次转换了。</p>
<p>然后我们将图片加载到了正中心的位置，<code>(w/4,h/4)</code> 对应图片左上角在画布上的位置。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dc.DrawImage(im, width/<span class="number">4</span>, height/<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p>输出的图片如下：</p>
<p><img src="3.png"></p>
<h2 id="旋转图片"><a href="#旋转图片" class="headerlink" title="旋转图片"></a>旋转图片</h2><p>图片加载好了，下面我们开始添加一个旋转操作。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRotateImage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	im, err := gg.LoadImage(<span class="string">&quot;/Users/bytedance/Desktop/test.png&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	w := im.Bounds().Size().X</span><br><span class="line">	h := im.Bounds().Size().Y</span><br><span class="line"></span><br><span class="line">	width := <span class="number">2</span> * w</span><br><span class="line">	height := <span class="number">2</span> * h</span><br><span class="line"></span><br><span class="line">	dc := gg.NewContext(width, height)</span><br><span class="line">	dc.DrawRectangle(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">float64</span>(width), <span class="keyword">float64</span>(width))</span><br><span class="line">	dc.SetRGB255(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">	dc.Fill()</span><br><span class="line"></span><br><span class="line">	dc.Rotate(<span class="number">45</span>)</span><br><span class="line">	dc.DrawImage(im, width/<span class="number">4</span>, height/<span class="number">4</span>)</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;test.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实只添加了一行代码，就是在加载图片前先调用了 <code>Rotate()</code> 方法。想象之中，我们会把图片旋转45度，但实际上是这样的：</p>
<p><img src="4.png"></p>
<p>好像不太符合预期，实际上，仔细研究一下就会发现，这里的旋转是围绕原点也就是整个画布的左上角进行旋转的，那我想要它围绕中心点旋转该怎么办呢？别慌，换一个方法就可以了。<code>RotateAbout()</code> 方法可以指定图片的旋转中心点，换这个来试试看：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRotateImage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	im, err := gg.LoadImage(<span class="string">&quot;/Users/bytedance/Desktop/test.png&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	w := im.Bounds().Size().X</span><br><span class="line">	h := im.Bounds().Size().Y</span><br><span class="line"></span><br><span class="line">	width := <span class="number">2</span> * w</span><br><span class="line">	height := <span class="number">2</span> * h</span><br><span class="line"></span><br><span class="line">	dc := gg.NewContext(width, height)</span><br><span class="line">	dc.DrawRectangle(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">float64</span>(width), <span class="keyword">float64</span>(width))</span><br><span class="line">	dc.SetRGB255(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">	dc.Fill()</span><br><span class="line"></span><br><span class="line">	dc.RotateAbout(<span class="number">45</span>, <span class="keyword">float64</span>(width/<span class="number">2</span>), <span class="keyword">float64</span>(height/<span class="number">2</span>))</span><br><span class="line">	dc.DrawImage(im, width/<span class="number">4</span>, height/<span class="number">4</span>)</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;test.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="5.png"></p>
<p>这下图片确实绕中心点旋转了，但转45度好像不应该是这样的，再来看看这个方法的说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; RotateAbout updates the current matrix with a clockwise rotation.</span><br><span class="line">&#x2F;&#x2F; Rotation occurs about the specified point. Angle is specified in radians.</span><br></pre></td></tr></table></figure>
<p>可以看到，第一个参数的意思其实代表的是弧度，而不是角度，所以想要旋转45度当然不能这么传，我们换一个姿势再试试。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRotateImage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	im, err := gg.LoadImage(<span class="string">&quot;/Users/bytedance/Desktop/test.png&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	w := im.Bounds().Size().X</span><br><span class="line">	h := im.Bounds().Size().Y</span><br><span class="line"></span><br><span class="line">	width := <span class="number">2</span> * w</span><br><span class="line">	height := <span class="number">2</span> * h</span><br><span class="line"></span><br><span class="line">	dc := gg.NewContext(width, height)</span><br><span class="line">	dc.DrawRectangle(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">float64</span>(width), <span class="keyword">float64</span>(width))</span><br><span class="line">	dc.SetRGB255(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">	dc.Fill()</span><br><span class="line"></span><br><span class="line">	dc.RotateAbout(gg.Radians(<span class="number">45</span>), <span class="keyword">float64</span>(width/<span class="number">2</span>), <span class="keyword">float64</span>(height/<span class="number">2</span>))</span><br><span class="line">	dc.DrawImage(im, width/<span class="number">4</span>, height/<span class="number">4</span>)</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;test.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="6.png"></p>
<p>这下终于得到了我们想要的图。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>图片旋转其实很简单，只需要在绘制前调用 <code>Rotate()</code> 或 <code>RotateAbout()</code> 方法即可。但需要注意几点：</p>
<ol>
<li>旋转是顺时针旋转</li>
<li><code>Rotate</code> 方法是绕左上角旋转</li>
<li>第一个参数都代表的是弧度而不是角度</li>
</ol>
<p>这样旋转我们也能掌握了，图片处理功能又进了一步。喜欢本文的朋友欢迎点赞收藏加关注～</p>
<p><img src="7.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2020/12/16/picture/go-pic-rotate-use-gg-package/" data-id="ckjjnjnca000ia8wc6fr7bn7q" data-title="【Go语言绘图】图片的旋转" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/go/" rel="tag">go</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-picture/go-basic-usage-of-gg-package" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2020/11/29/picture/go-basic-usage-of-gg-package/" class="article-date">
  <time class="dt-published" datetime="2020-11-29T13:45:35.000Z" itemprop="datePublished">2020-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2020/11/29/picture/go-basic-usage-of-gg-package/">【Go语言绘图】gg 库的基本使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>最近接了个比较大的需求，需要做很多图片处理的事情，比如图片的旋转裁截拼接，各种渐变处理，文字排列，一开始光是想想就头疼。但没有办法，既然已经需求已经到手上了，那就得把它做好才行，于是便开始被迫营业，无证上岗了。</p>
<p>经过一番查找，找到了一个Go语言图片处理的库，经过调研发现还挺强的，能满足需求，于是决定写点文章，记录一下使用心得，以便日后不时之需。</p>
<h2 id="gg-库的安装和简单使用"><a href="#gg-库的安装和简单使用" class="headerlink" title="gg 库的安装和简单使用"></a>gg 库的安装和简单使用</h2><p>使用之前，我们当然得先来安装一下这个库：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get -u github.com/fogleman/gg</span><br></pre></td></tr></table></figure>
<p>这个库的一个好处是有很多测试代码，可以拿来跑跑看，就知道它大概能实现什么样的效果了。</p>
<p><img src="1.png"></p>
<p>这是它例子的大概效果图，可以看到，能实现的图形效果还是挺多的。</p>
<p><img src="2.png"></p>
<p>我们拿其中的一个代码来简单体验一下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/fogleman/gg&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    dc := gg.NewContext(<span class="number">1000</span>, <span class="number">1000</span>)</span><br><span class="line">    dc.DrawCircle(<span class="number">500</span>, <span class="number">500</span>, <span class="number">400</span>)</span><br><span class="line">    dc.SetRGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    dc.Fill()</span><br><span class="line">    dc.SavePNG(<span class="string">&quot;out.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>duang 的一下，一张黑不溜秋的圆形图就生成了。</p>
<p><img src="3.png"></p>
<p>关于上面的代码，下面会进行逐一说明。</p>
<h2 id="调整生成图片的大小"><a href="#调整生成图片的大小" class="headerlink" title="调整生成图片的大小"></a>调整生成图片的大小</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dc := gg.NewContext(<span class="number">1000</span>, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<p>这是先初始化一个 <code>Context</code> 对象，使用库之前都需要先初始化一个 <code>Context</code> 对象，后面的两个 <code>1000</code>，分别对应着最终生成图片的宽度和高度。我们可以修改一下高度为 <code>500</code> 看看效果。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dc := gg.NewContext(<span class="number">1000</span>, <span class="number">500</span>)</span><br></pre></td></tr></table></figure>
<p><img src="4.png"></p>
<p>可以看到图片被腰斩了，高度矮了一半，同样修改宽度参数也可以得到类似的效果，这里就不演示了。</p>
<h2 id="调整圆形参数"><a href="#调整圆形参数" class="headerlink" title="调整圆形参数"></a>调整圆形参数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dc.DrawCircle(<span class="number">500</span>, <span class="number">500</span>, <span class="number">400</span>)</span><br></pre></td></tr></table></figure>
<p>这里是画一个圆心位置在 <code>(500,500)</code>，半径为 <code>400</code> 的圆形。需要说明的一点是，这里的坐标轴是以左上角为原点的，水平向右是横轴正方向，竖直向下是纵轴正方向，所以<code>(500,500)</code>正是中心位置。我们可以调整一下参数值来看下效果。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dc := gg.NewContext(<span class="number">1000</span>, <span class="number">1000</span>)</span><br><span class="line">dc.DrawCircle(<span class="number">300</span>, <span class="number">300</span>, <span class="number">400</span>)</span><br></pre></td></tr></table></figure>
<p><img src="5.png"></p>
<p>可以看到，圆心往左上角移动了。还可以调整一下半径参数试试：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dc := gg.NewContext(<span class="number">1000</span>, <span class="number">1000</span>)</span><br><span class="line">dc.DrawCircle(<span class="number">300</span>, <span class="number">300</span>, <span class="number">300</span>)</span><br></pre></td></tr></table></figure>
<p><img src="6.png"></p>
<p>这样我们又得到了一个完整的圆。</p>
<h2 id="调整颜色"><a href="#调整颜色" class="headerlink" title="调整颜色"></a>调整颜色</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dc.SetRGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">dc.Fill()</span><br></pre></td></tr></table></figure>
<p>这两句的意思是先设置颜色值为 <code>(0,0,0)</code>，也就是黑色，乍眼一看这三个值分别对应的是颜色的 <code>R、G、B</code>值，但实际上完全不是这么回事，这里需要注意的是，这三个值分别代表红色、绿色、蓝色的程度，所以如果分别设置为，会得到下面的三张图。</p>
<p><img src="7.png"><br><img src="8.png"><br><img src="9.png"></p>
<p>那如果想要根据RGB值来设置颜色该怎么处理呢？其实也很简单，做一个压缩映射即可，<code>RGB</code>值的范围是0～255，表示的含义也是对应色值的程度，这里不过将范围变成了0～1，那我们将需要使用到的值除以255就可以得到对应的映射值了。具体的颜色RGB值跟颜色的对应关系可以在网上搜到。</p>
<p><a target="_blank" rel="noopener" href="https://tool.oschina.net/commons?type=3">https://tool.oschina.net/commons?type=3</a></p>
<p>下面我们用淡黄色做一个例子，对应的 <code>RGB</code> 值是 <code>(255,222,173)</code> ，我们添加一下映射转换的代码即可：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rbgConverter = <span class="function"><span class="keyword">func</span><span class="params">(r []<span class="keyword">float64</span>)</span> []<span class="title">float64</span></span> &#123;</span><br><span class="line">	result := <span class="built_in">make</span>([]<span class="keyword">float64</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(r); i++ &#123;</span><br><span class="line">		result = <span class="built_in">append</span>(result, r[i] / <span class="number">255</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dc := gg.NewContext(<span class="number">1000</span>, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">	dc.DrawCircle(<span class="number">500</span>, <span class="number">500</span>, <span class="number">400</span>)</span><br><span class="line"></span><br><span class="line">	rgb := []<span class="keyword">float64</span>&#123;<span class="number">255</span>,<span class="number">222</span>,<span class="number">173</span>&#125;</span><br><span class="line">	newRgb := rbgConverter(rgb)</span><br><span class="line"></span><br><span class="line">	dc.SetRGB(newRgb[<span class="number">0</span>], newRgb[<span class="number">1</span>], newRgb[<span class="number">2</span>])</span><br><span class="line">	dc.Fill()</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;out.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样我们就得到了一张黄图。</p>
<p><img src="10.png"></p>
<h2 id="保存图片"><a href="#保存图片" class="headerlink" title="保存图片"></a>保存图片</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dc.SavePNG(<span class="string">&quot;out.png&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>SavePNG()</code> 方法可以将当前图形保存成 <code>PNG</code> 格式文件，路径可以是相对路径，也可以是绝对路径。</p>
<p><code>SaveJPG()</code> 方法可以将当前图形保存成 <code>JPG</code> 格式文件。</p>
<p>当然，这里的两个方法其实也只是包装了一下，点进代码可以看到，里面并没有什么奇奇怪怪的逻辑。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SavePNG encodes the image as a PNG and writes it to disk.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dc *Context)</span> <span class="title">SavePNG</span><span class="params">(path <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> SavePNG(path, dc.im)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SavePNG</span><span class="params">(path <span class="keyword">string</span>, im image.Image)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	file, err := os.Create(path)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line">	<span class="keyword">return</span> png.Encode(file, im)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所以，我们也可以根据自己的需要将图片保存成其它格式或者存到其它地方。</p>
<h2 id="加载图片"><a href="#加载图片" class="headerlink" title="加载图片"></a>加载图片</h2><p>加载图片有三个方法可以实现，<code>LoadPNG()</code> 用来加载 <code>PNG</code> 格式的图片，<code>LoadJPG()</code> 用来加载 <code>JPG</code> 格式的图片，如果不清楚该用什么方法，可以直接使用 <code>LoadImage()</code> 方法来加载图片。</p>
<p>加载图片后，得到的是一个 <code>image.Image</code> 对象，可以通过该对象来获取图片的一些基本信息，如：图片的长和宽、图片某一点的颜色RGB值。</p>
<p>加载图片之后，可以使用 <code>DrawImage()</code> 方法来将图片绘制出来，以便用于后续操作。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">im, err := gg.LoadImage(<span class="string">&quot;/Users/bytedance/Desktop/test.jpg&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">w := im.Bounds().Size().X</span><br><span class="line">h := im.Bounds().Size().Y</span><br><span class="line"></span><br><span class="line">dc := gg.NewContext(h, w)</span><br><span class="line">dc.DrawImage(im, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h2 id="裁剪"><a href="#裁剪" class="headerlink" title="裁剪"></a>裁剪</h2><p>有一个经常使用到的方法叫 <code>Clip()</code> ，该方法可以将图像进行裁剪，裁剪的形状取决于之前画的图形。</p>
<p>下面来举个例子，这是我们要裁剪的图，我们用一个圆形来对它进行裁剪。</p>
<p><img src="11.png"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 加载图片，这里路径换成自己的</span></span><br><span class="line">	im, err := gg.LoadImage(<span class="string">&quot;test.jpg&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取图片的宽度和高度</span></span><br><span class="line">	w := im.Bounds().Size().X</span><br><span class="line">	h := im.Bounds().Size().Y</span><br><span class="line"></span><br><span class="line">	dc := gg.NewContext(h, w)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 取宽度和高度的最小值作为直径</span></span><br><span class="line">	radius := math.Min(<span class="keyword">float64</span>(w), <span class="keyword">float64</span>(h)) / <span class="number">2</span></span><br><span class="line">    <span class="comment">// 画圆形</span></span><br><span class="line">	dc.DrawCircle(<span class="keyword">float64</span>(w/<span class="number">2</span>), <span class="keyword">float64</span>(h/<span class="number">2</span>), radius)</span><br><span class="line">    <span class="comment">// 对画布进行裁剪</span></span><br><span class="line">	dc.Clip()</span><br><span class="line">    <span class="comment">// 加载图片</span></span><br><span class="line">	dc.DrawImage(im, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	dc.SavePNG(<span class="string">&quot;out.png&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="12.png"></p>
<p>这样一来，头像就做好了【手动狗头】。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>Go 语言也可以实现对图片进行很多类型的操作，今天主要介绍了图片的加载、保存、绘制圆形、调整大小和颜色以及裁剪。之后还会进一步介绍其它功能。</p>
<p>我觉得如果不是需要使用并没有熟悉它的必要，但知道有这么个东西，知道它能实现什么样的效果，可以让你手上的牌又多了一张，以后有需要的时候便不至于捉襟见肘了。所以还在等什么，赶紧点赞收藏加关注吧～</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2020/11/29/picture/go-basic-usage-of-gg-package/" data-id="ckjjnjnc5000da8wcgeqn5l52" data-title="【Go语言绘图】gg 库的基本使用" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/go/" rel="tag">go</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-data-analysis/r-study-basic-type" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2020/11/28/data-analysis/r-study-basic-type/" class="article-date">
  <time class="dt-published" datetime="2020-11-27T23:54:35.000Z" itemprop="datePublished">2020-11-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a>►<a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2020/11/28/data-analysis/r-study-basic-type/">【R语言入门】R语言中的变量与基本数据类型</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>在前一篇中，我们介绍了 <code>R</code> 语言和 <code>R Studio</code> 的安装，并简单的介绍了一个示例，接下来让我们由浅入深的学习 <code>R</code> 语言的相关知识。</p>
<p>本篇将主要介绍 <code>R</code> 语言的基本操作、变量和几种基本数据类型，好对 <code>R</code> 语言的使用方法有一个基本的概念。通过本篇的学习，你将了解到：</p>
<ol>
<li><code>R</code> 语言有哪些基本操作</li>
<li>什么是变量，以及如何给变量赋值</li>
<li><code>R</code> 语言有哪些基本数据类型，如何确定变量的数据类型</li>
</ol>
<h2 id="R-语言的基本操作"><a href="#R-语言的基本操作" class="headerlink" title="R 语言的基本操作"></a>R 语言的基本操作</h2><p><code>R</code> 语言的默认提示符是 <code>&gt;</code> ，它表示正在等待输入命令，每次输入命令后敲击回车即可执行当前命令。</p>
<p><img src="1.png"></p>
<p><code>R</code> 语言支持的基本操作主要有加、减、乘、除、取余和幂运算，对应的运算符分别为：+、-、*、/、%%、^。</p>
<p>加减乘除就不必多说了，但有一点需要提一下，跟许多语言不一样的是，<code>R</code> 语言中，除法运算得到的不是整数部分，而是包含小数部分的结果。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">9</span>/<span class="number">2</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">4.5</span></span><br><span class="line">&gt; <span class="number">9</span>/<span class="number">4</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">2.25</span></span><br><span class="line">&gt; <span class="number">11</span>/<span class="number">3</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">3.666667</span></span><br></pre></td></tr></table></figure>
<p>取余运算的含义是计算整除后的余数：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">9</span> %% <span class="number">2</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1</span></span><br><span class="line">&gt; <span class="number">9</span> %% <span class="number">4</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1</span></span><br><span class="line">&gt; <span class="number">9</span> %% <span class="number">3</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0</span></span><br><span class="line">&gt; <span class="number">11</span> % 4</span><br><span class="line">错误: unexpected input in &quot;11 % <span class="number">4</span><span class="string">&quot;</span></span><br></pre></td></tr></table></figure>
<p>在使用时需要注意的是有两个百分号组成，输入错误则会得上上述错误提示。</p>
<p>幂运算跟数学中的幂运算含义一致，<code>2^3</code> 代表的是2的3次幂：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">2</span> ^ <span class="number">3</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">8</span></span><br><span class="line">&gt; <span class="number">3</span> ^ <span class="number">2</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">9</span></span><br><span class="line">&gt; <span class="number">2</span> ^ <span class="number">10</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1024</span></span><br><span class="line">&gt; <span class="number">2</span> ^ <span class="number">100</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1.267651e+30</span></span><br></pre></td></tr></table></figure>
<h2 id="R-语言中的变量"><a href="#R-语言中的变量" class="headerlink" title="R 语言中的变量"></a>R 语言中的变量</h2><p>在使用 <code>R</code> 语言时，我们通常很难一步到位得到最终的结果，需要进行一些复杂的计算。这时我们便需要使用变量来存放计算得到的中间结果。</p>
<p><code>R</code> 语言中，可以将变量想象成一个盒子，我们可以将任何数据暂存到这个盒子里，但同一时刻，这个盒子只能保存一个数据，如果被多次赋值，则只会保存最后一次放入的数据。</p>
<p><code>R</code> 语言中的赋值符号是 <code>-&gt;</code>，虽然也可以使用 <code>=</code> 进行赋值，但强烈建议不要这样做，这样不仅显得不专业，而且在一些情况下会出现问题。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; x &lt;- 3</span><br><span class="line">&gt; x &lt;- 4</span><br><span class="line">&gt; x &lt;- 9</span><br><span class="line">&gt; x</span><br><span class="line">[<span class="number">1</span>] <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p><code>R</code> 语言中的变量不需要事先声明，直接使用即可。如果使用了一个之前没有出现过的变量，则会创建一个新的变量。<code>R</code> 语言中变量是区分大小写的，<code>x</code> 与 <code>X</code> 是两个不同的变量。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; X</span><br><span class="line">错误: 找不到对象<span class="string">&#x27;X&#x27;</span></span><br><span class="line">&gt; X &lt;- 1</span><br><span class="line">&gt; X &lt;- 3</span><br><span class="line">&gt; X</span><br><span class="line">[<span class="number">1</span>] <span class="number">3</span></span><br><span class="line">&gt; x</span><br><span class="line">[<span class="number">1</span>] <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>变量都是有名字的，比如<code>x</code>、<code>y</code>、<code>stu_score</code>，变量的命名必须满足以下规则：</p>
<ol>
<li>只能使用字母（区分大小写）、数字、“_”（下划线）、“.”（英文句号），不能有中文、空格和其它特殊字符存在</li>
<li>不能以数字、下划线开头，开头必须是英文字母或者点</li>
<li>可以以点号开头，但点号后面的符号不能是数字</li>
</ol>
<p>在 <code>R</code> 语言中，如果非要搞一些骚操作，用一些奇怪的变量名，也不是不可以，需要用反引号来包裹。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; `* 90` &lt;- <span class="number">10</span></span><br><span class="line">&gt; `* 90`</span><br><span class="line">[<span class="number">1</span>] <span class="number">10</span></span><br><span class="line">&gt; `变量` &lt;- <span class="number">20</span></span><br><span class="line">&gt; `变量`</span><br><span class="line">[<span class="number">1</span>] <span class="number">20</span></span><br></pre></td></tr></table></figure>
<p>当然，不建议这样做，变量取名最好简单且有意义，这样可以减少与其他人的沟通成本以及日后的理解成本。</p>
<h2 id="R-语言中的基本数据类型"><a href="#R-语言中的基本数据类型" class="headerlink" title="R 语言中的基本数据类型"></a>R 语言中的基本数据类型</h2><p><code>R</code> 语言中主要数据类型有：向量、列表、矩阵、因子、数据框、数组。这些会在后面的文章中进行介绍，本篇只介绍基本的几种数据类型。</p>
<h3 id="1-逻辑型-logical"><a href="#1-逻辑型-logical" class="headerlink" title="1. 逻辑型(logical)"></a>1. 逻辑型(logical)</h3><p>逻辑型数据有两种可能的值，<code>TRUE</code> 或 <code>FALSE</code> 。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; v &lt;- <span class="literal">TRUE</span></span><br><span class="line">&gt; <span class="built_in">class</span>(v)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;logical&quot;</span></span><br><span class="line">&gt; y &lt;- <span class="literal">FALSE</span></span><br><span class="line">&gt; <span class="built_in">class</span>(v)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;logical&quot;</span></span><br><span class="line">&gt; y &lt;- false</span><br><span class="line">错误: 找不到对象<span class="string">&#x27;false&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>class</code> 函数可以获取变量的类型信息，可以看到，变量 <code>v</code> 和 <code>y</code> 都是 <code>logical</code> 类型。需要注意的是 <code>TRUE</code> 和 <code>FALSE</code> 必须全部大写，否则会出现上面的错误提示。</p>
<h3 id="2-数值型-numeric"><a href="#2-数值型-numeric" class="headerlink" title="2. 数值型(numeric)"></a>2. 数值型(numeric)</h3><p><code>R</code> 语言中数字的默认类型为数值型，在运算时需要注意其精度问题，当整数部分大于等于7位时，将舍弃小数部分，当整数部分小于7位时，与小数部分一起最多保留7位数字。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt; i &lt;- 10</span><br><span class="line">&gt; <span class="built_in">class</span>(i)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;numeric&quot;</span></span><br><span class="line">&gt; j &lt;- 11.1</span><br><span class="line">&gt; <span class="built_in">class</span>(j)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;numeric&quot;</span></span><br><span class="line">&gt; k &lt;- 1.1234567890</span><br><span class="line">&gt; <span class="built_in">class</span>(k)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;numeric&quot;</span></span><br><span class="line">&gt; k</span><br><span class="line">[<span class="number">1</span>] <span class="number">1.123457</span></span><br><span class="line">&gt; k &lt;- 123456789.123456789</span><br><span class="line">&gt; k</span><br><span class="line">[<span class="number">1</span>] <span class="number">123456789</span></span><br><span class="line">&gt; k &lt;- 1234567.123456789</span><br><span class="line">&gt; k</span><br><span class="line">[<span class="number">1</span>] <span class="number">1234567</span></span><br><span class="line">&gt; k &lt;- 123456.123456789</span><br><span class="line">&gt; k</span><br><span class="line">[<span class="number">1</span>] <span class="number">123456.1</span></span><br></pre></td></tr></table></figure>
<h3 id="3-整数型-integer"><a href="#3-整数型-integer" class="headerlink" title="3. 整数型(integer)"></a>3. 整数型(integer)</h3><p><code>R</code> 语言中，整数型需要使用数字+L来表示，如：<code>2L</code>、<code>11L</code>、<code>-10L</code>。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; i &lt;- 1L</span><br><span class="line">&gt; <span class="built_in">class</span>(i)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;integer&quot;</span></span><br><span class="line">&gt; j &lt;- 22L</span><br><span class="line">&gt; <span class="built_in">class</span>(j)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;integer&quot;</span></span><br><span class="line">&gt; k &lt;- -<span class="number">10L</span></span><br><span class="line">&gt; <span class="built_in">class</span>(k)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;integer&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-字符型-character"><a href="#4-字符型-character" class="headerlink" title="4. 字符型(character)"></a>4. 字符型(character)</h3><p><code>R</code> 语言中字符型即字符串类型，通常为用单引号或双引号包围的字符串。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; name &lt;- <span class="string">&quot;Frank&quot;</span></span><br><span class="line">&gt; <span class="built_in">class</span>(name)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;character&quot;</span></span><br><span class="line">&gt; doc_name &lt;- <span class="string">&quot;study.mp4&quot;</span></span><br><span class="line">&gt; <span class="built_in">class</span>(doc_name)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;character&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-复数型-Complex"><a href="#5-复数型-Complex" class="headerlink" title="5. 复数型(Complex)"></a>5. 复数型(Complex)</h3><p><code>R</code> 语言是支持复数计算的，复数也是 <code>R</code> 语言的基本类型之一。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; c1 &lt;- 3 + <span class="number">2i</span></span><br><span class="line">&gt; <span class="built_in">class</span>(c1)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;complex&quot;</span></span><br><span class="line">&gt; c2 &lt;-<span class="number">6</span> - <span class="number">3i</span></span><br><span class="line">&gt; <span class="built_in">class</span>(c2)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;complex&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-原型-Raw"><a href="#6-原型-Raw" class="headerlink" title="6. 原型(Raw)"></a>6. 原型(Raw)</h3><p><code>R</code> 语言还有一种不太常见的基本数据类型，叫原型(<code>raw</code>)。<code>raw</code> 类型是直接使用其二进制内容来进行保存和使用的类型。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; v &lt;- charToRaw(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">&gt; <span class="built_in">class</span>(v)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;raw&quot;</span></span><br><span class="line">&gt; v</span><br><span class="line">[<span class="number">1</span>] <span class="number">48</span> <span class="number">65</span> <span class="number">6</span><span class="built_in">c</span> <span class="number">6</span><span class="built_in">c</span> <span class="number">6</span>f</span><br></pre></td></tr></table></figure>
<h3 id="如何判断变量的类型"><a href="#如何判断变量的类型" class="headerlink" title="如何判断变量的类型"></a>如何判断变量的类型</h3><p>当我们拿到一个变量之后，如何判断它的数据类型呢？上面的例子中，其实已经有所提及，使用 <code>class()</code> 函数可以简单方便的查看变量的类型，但还有更简单的方式，为了判断某个变量<code>x</code> 保存的基本类型，可以用 <code>is.xxx()</code> 类函数，如<code>is.integer(x)</code>, <code>is.double(x)</code>, <code>is.numeric(x)</code>, <code>is.logical(x)</code>, <code>is.character(x)</code>, <code>is.complex(x)</code>, <code>is.raw(x)</code>。 其中 <code>is.numeric(x)</code> 对 <code>integer</code> 和 <code>double</code> 内容都返回真值。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">is.character</span>(s)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; <span class="built_in">is.character</span>(v)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></span><br><span class="line">&gt; <span class="built_in">is.raw</span>(v)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; <span class="built_in">is.integer</span>(i)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; <span class="built_in">is.numeric</span>(i)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; <span class="built_in">is.complex</span>(c1)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></span><br><span class="line">&gt; <span class="built_in">is.integer</span>(c1)</span><br><span class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></span><br></pre></td></tr></table></figure>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>至此，本篇就告一段落了，相信通过本篇的学习，对 <code>R</code> 语言的基本数据类型能有一个整体的掌握，别忘了回顾一下之前的问题，这些你都了解了吗：</p>
<ol>
<li><code>R</code> 语言有哪些基本操作</li>
<li>什么是变量，以及如何给变量赋值</li>
<li><code>R</code> 语言有哪些基本数据类型，如何确定变量的数据类型</li>
</ol>
<p>之后的篇章中，将会继续介绍 <code>R</code> 语言的各方各面，让 <code>R</code> 语言能为我们的数据分析提供更强力的支持！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2020/11/28/data-analysis/r-study-basic-type/" data-id="ckjjnjnbu0004a8wc5llq44u0" data-title="【R语言入门】R语言中的变量与基本数据类型" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/R/" rel="tag">R</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-data-analysis/r-study-install" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2020/11/28/data-analysis/r-study-install/" class="article-date">
  <time class="dt-published" datetime="2020-11-27T23:47:35.000Z" itemprop="datePublished">2020-11-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a>►<a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2020/11/28/data-analysis/r-study-install/">【R语言入门】R语言环境搭建</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p><code>R</code> 语言是一个功能十分强大的工具，几乎绝大多数的数据分析工作都可以在 <code>R</code> 中完成，并且拥有很极强的绘图功能支持，能让你手中的数据以各种姿势进行可视化呈现，而且支持 <code>Windows</code>、<code>Mac OS</code>、<code>Linux</code> 系统，而且使用起来也比较简单方便。</p>
<p>如果想要开始学习数据分析，或者仅仅是想做出狂拽炫酷屌的数据分析图，那么 <code>R</code> 语言会是个不错的选择。</p>
<h2 id="R-下载与安装"><a href="#R-下载与安装" class="headerlink" title="R 下载与安装"></a>R 下载与安装</h2><p>打开 <code>https://cran.r-project.org/mirrors.html</code> ，根据自己所在的位置选择对应的镜像站，通常选择 <code>China</code> 下的镜像站。</p>
<p><img src="2.png"></p>
<p>根据自己使用的平台，选择对应安装包进行下载安装即可。</p>
<p>如果是 <code>Windows</code> 选择 <code>base</code> 版本进行下载安装即可。安装过程全部选择默认选项即可。</p>
<p><img src="3.png"><br><img src="4.png"><br><img src="5.png"></p>
<p>如果用的是 <code>Mac</code> ，则选择 <code>Download R for (Mac) OS X</code>，下载最新版本的安装包后进行默认安装即可。</p>
<p><img src="6.png"></p>
<p>安装完成之后，你将会看到一个朴实无华的图标，没错，这就是 <code>R</code> 语言本尊了。</p>
<p><img src="7.png"></p>
<h2 id="R-studio-下载与安装"><a href="#R-studio-下载与安装" class="headerlink" title="R studio 下载与安装"></a>R studio 下载与安装</h2><p>打开 <code>https://www.rstudio.com/products/rstudio/download/</code> ，选择 <code>Free</code> 版本进行下载。</p>
<p><img src="8.png"></p>
<p>这里会根据你所在平台显示对应的下载链接，点击下载即可。</p>
<p><img src="9.png"></p>
<p>安装时，除了安装位置，其余均选择默认选项即可。</p>
<p>安装好之后，你又能收获一个新图标，这次要更加圆润一点。</p>
<p><img src="10.png"></p>
<h2 id="R-语言简单实例"><a href="#R-语言简单实例" class="headerlink" title="R 语言简单实例"></a>R 语言简单实例</h2><p>主要工作已经完成，让我们动动小手，优雅的单击（或双击）<code>R Studio</code> 图标，来感受一下R 语言的魅力。</p>
<p>打开 <code>RStudio</code>，会在 <code>Consule</code> 面板看到 <code>R</code> 语言的版本、版权信息和一些有用的提示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">R version 4.0.3 (2020-10-10) -- &quot;Bunny-Wunnies Freak Out&quot;</span><br><span class="line">Copyright (C) 2020 The R Foundation for Statistical Computing</span><br><span class="line">Platform: x86_64-apple-darwin17.0 (64-bit)</span><br><span class="line"></span><br><span class="line">R是自由软件，不带任何担保。</span><br><span class="line">在某些条件下你可以将其自由散布。</span><br><span class="line">用&#39;license()&#39;或&#39;licence()&#39;来看散布的详细条件。</span><br><span class="line"></span><br><span class="line">R是个合作计划，有许多人为之做出了贡献.</span><br><span class="line">用&#39;contributors()&#39;来看合作者的详细情况</span><br><span class="line">用&#39;citation()&#39;会告诉你如何在出版物中正确地引用R或R程序包。</span><br><span class="line"></span><br><span class="line">用&#39;demo()&#39;来看一些示范程序，用&#39;help()&#39;来阅读在线帮助文件，或</span><br><span class="line">用&#39;help.start()&#39;通过HTML浏览器来看帮助文件。</span><br><span class="line">用&#39;q()&#39;退出R.</span><br></pre></td></tr></table></figure>
<p>整体界面如下图：</p>
<p><img src="11.png"></p>
<p>在 <code>consule</code> 面板中输入：<code>example(plot)</code>，轻轻敲击几次回车，就能看到 <code>plot</code> 函数的一些实例了。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&gt; example(plot)</span><br><span class="line"></span><br><span class="line">plot&gt; Speed &lt;- cars$speed</span><br><span class="line"></span><br><span class="line">plot&gt; Distance &lt;- cars$dist</span><br><span class="line"></span><br><span class="line">plot&gt; plot(Speed, Distance, panel.first = grid(<span class="number">8</span>, <span class="number">8</span>),</span><br><span class="line">plot+      pch = <span class="number">0</span>, cex = <span class="number">1.2</span>, col = <span class="string">&quot;blue&quot;</span>)</span><br><span class="line">按&lt;Return&gt;键来看下一个图: </span><br><span class="line"></span><br><span class="line">plot&gt; plot(Speed, Distance,</span><br><span class="line">plot+      panel.first = lines(stats::lowess(Speed, Distance), lty = <span class="string">&quot;dashed&quot;</span>),</span><br><span class="line">plot+      pch = <span class="number">0</span>, cex = <span class="number">1.2</span>, col = <span class="string">&quot;blue&quot;</span>)</span><br><span class="line">按&lt;Return&gt;键来看下一个图: </span><br><span class="line"></span><br><span class="line">plot&gt; <span class="comment">## Show the different plot types</span></span><br><span class="line">plot&gt; x &lt;- 0:<span class="number">12</span></span><br><span class="line"></span><br><span class="line">plot&gt; y &lt;- <span class="built_in">sin</span>(<span class="built_in">pi</span>/<span class="number">5</span> * x)</span><br><span class="line"></span><br><span class="line">plot&gt; op &lt;- par(mfrow = <span class="built_in">c</span>(<span class="number">3</span>,<span class="number">3</span>), mar = <span class="number">.1</span>+ <span class="built_in">c</span>(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">plot&gt; <span class="keyword">for</span> (tp <span class="keyword">in</span> <span class="built_in">c</span>(<span class="string">&quot;p&quot;</span>,<span class="string">&quot;l&quot;</span>,<span class="string">&quot;b&quot;</span>,  <span class="string">&quot;c&quot;</span>,<span class="string">&quot;o&quot;</span>,<span class="string">&quot;h&quot;</span>,  <span class="string">&quot;s&quot;</span>,<span class="string">&quot;S&quot;</span>,<span class="string">&quot;n&quot;</span>)) &#123;</span><br><span class="line">plot+    plot(y ~ x, type = tp, main = paste0(<span class="string">&quot;plot(*, type = \&quot;&quot;</span>, tp, <span class="string">&quot;\&quot;)&quot;</span>))</span><br><span class="line">plot+    <span class="keyword">if</span>(tp == <span class="string">&quot;S&quot;</span>) &#123;</span><br><span class="line">plot+       lines(x, y, type = <span class="string">&quot;s&quot;</span>, col = <span class="string">&quot;red&quot;</span>, lty = <span class="number">2</span>)</span><br><span class="line">plot+       mtext(<span class="string">&quot;lines(*, type = \&quot;s\&quot;, ...)&quot;</span>, col = <span class="string">&quot;red&quot;</span>, cex = <span class="number">0.8</span>)</span><br><span class="line">plot+    &#125;</span><br><span class="line">plot+ &#125;</span><br><span class="line">按&lt;Return&gt;键来看下一个图: </span><br><span class="line"></span><br><span class="line">plot&gt; par(op)</span><br><span class="line"></span><br><span class="line">plot&gt; <span class="comment">##--- Log-Log Plot  with  custom axes</span></span><br><span class="line">plot&gt; lx &lt;- seq(<span class="number">1</span>, <span class="number">5</span>, <span class="built_in">length</span> = <span class="number">41</span>)</span><br><span class="line"></span><br><span class="line">plot&gt; yl &lt;- <span class="built_in">expression</span>(e^&#123;-frac(<span class="number">1</span>,<span class="number">2</span>) * &#123;<span class="built_in">log</span>[<span class="number">10</span>](x)&#125;^<span class="number">2</span>&#125;)</span><br><span class="line"></span><br><span class="line">plot&gt; y &lt;- <span class="built_in">exp</span>(-<span class="number">.5</span>*lx^<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">plot&gt; op &lt;- par(mfrow = <span class="built_in">c</span>(<span class="number">2</span>,<span class="number">1</span>), mar = par(<span class="string">&quot;mar&quot;</span>)-<span class="built_in">c</span>(<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>), mgp = <span class="built_in">c</span>(<span class="number">2</span>, <span class="number">.7</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">plot&gt; plot(<span class="number">10</span>^lx, y, <span class="built_in">log</span> = <span class="string">&quot;xy&quot;</span>, type = <span class="string">&quot;l&quot;</span>, col = <span class="string">&quot;purple&quot;</span>,</span><br><span class="line">plot+      main = <span class="string">&quot;Log-Log plot&quot;</span>, ylab = yl, xlab = <span class="string">&quot;x&quot;</span>)</span><br><span class="line">按&lt;Return&gt;键来看下一个图: </span><br><span class="line"></span><br><span class="line">plot&gt; plot(<span class="number">10</span>^lx, y, <span class="built_in">log</span> = <span class="string">&quot;xy&quot;</span>, type = <span class="string">&quot;o&quot;</span>, pch = <span class="string">&quot;.&quot;</span>, col = <span class="string">&quot;forestgreen&quot;</span>,</span><br><span class="line">plot+      main = <span class="string">&quot;Log-Log plot with custom axes&quot;</span>, ylab = yl, xlab = <span class="string">&quot;x&quot;</span>,</span><br><span class="line">plot+      axes = <span class="literal">FALSE</span>, frame.plot = <span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line">plot&gt; my.at &lt;- 10^(<span class="number">1</span>:<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">plot&gt; axis(<span class="number">1</span>, at = my.at, labels = formatC(my.at, format = <span class="string">&quot;fg&quot;</span>))</span><br><span class="line"></span><br><span class="line">plot&gt; e.y &lt;- -<span class="number">5</span>:-<span class="number">1</span> ; at.y &lt;- 10^e.y</span><br><span class="line"></span><br><span class="line">plot&gt; axis(<span class="number">2</span>, at = at.y, col.axis = <span class="string">&quot;red&quot;</span>, las = <span class="number">1</span>,</span><br><span class="line">plot+      labels = as.expression(lapply(e.y, <span class="keyword">function</span>(E) bquote(<span class="number">10</span>^.(E)))))</span><br><span class="line"></span><br><span class="line">plot&gt; par(op)</span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure>
<p>下面是输出的图片：</p>
<p><img src="12.png"><br><img src="13.png"><br><img src="14.png"><br><img src="15.png"></p>
<p>这是基础绘图函数 <code>plot</code> 的几个示例，可以看出它能支持的图形已经有许多了，后面会有专门的文章来介绍 <code>plot</code> 函数的详细使用方法。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>到此为止，<code>R</code> 语言就已经顺利的收入囊中了，恭喜你，又掌握了一门语言（的 <code>Hello world</code>）了。【此处应有掌声】</p>
<p>接下来，会继续介绍 <code>R</code> 语言的基本用法和其中比较重要的函数使用方法，目标是能使用 <code>R</code> 语言对数据进行初步分析，以便能在生活和工作之中有所应用。</p>
<p>之所以开始写 <code>R</code> 语言相关的文章，是因为在工作中察觉到了数据的重要性，虽说应该让专业的人来做专业的事情，但如果对此一无所知，又怎么知道专业的人能够做什么事情呢，何况如果一点点小事情就要找数据的同学提需求未免不太合适，自己先有头绪和初步验证后也许会更有效率。而且技多不压身嘛。加之在大学时就对数据分析感兴趣，也曾经学过 <code>R</code> 语言，现在算是重温和复习吧。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2020/11/28/data-analysis/r-study-install/" data-id="ckjjnjnbw0006a8wc2nlbb5tb" data-title="【R语言入门】R语言环境搭建" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/R/" rel="tag">R</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-thoughts/cogito-ergo-sum" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2020/11/01/thoughts/cogito-ergo-sum/" class="article-date">
  <time class="dt-published" datetime="2020-11-01T14:45:35.000Z" itemprop="datePublished">2020-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2020/11/01/thoughts/cogito-ergo-sum/">【周末随想】我思故我在</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>又是一个周末的晚上，刚在客厅看完令人爆笑的脱口秀，回到自己房间，关了灯，做几次深呼吸，把心情平静了下来。虽然刚才的脱口秀确实让人忍俊不禁，但此刻的独处更让我欢喜。在这漆黑的房间里，闭上眼，聆听周围的一切，感受心跳的旋律和呼吸的节奏，能获得一种独特的平静。</p>
<p>闭目养神了片刻，睁开双眼，路由器的信号灯在角落里跳动着。我打开窗，一阵微风吹入，周身泛起一股寒意。不知不觉，已是深秋，习惯性的抬头看了一眼天空，窗外的夜空，被周围的建筑切割成了好几片，那一个个小方格里，透出或黄或白的灯光，每一盏灯背后，都在上演着各自的故事。</p>
<p>我披了外套，在小区里踱起步来。今晚的月亮挂的很高，漆黑的夜空散布着几片白云，在这漆黑的画布上，启明星的光芒显得格外耀眼，皓月悬空，孤星伴月，给这深秋的夜色凭添了几分孤冷。周遭路灯的光影，让这薄弱的月光毫无抗衡之力，只得往暗黑处避让。于是我往黑暗里走，去寻找这散落的月光。</p>
<p>此时的小区已经没有了白日里的热闹景象，路上只有稀疏几个晚归的行人。路旁白日里还妖艳绽放的小花，在黑夜里黯然失色，只剩下孤零零的身影，在这微冷的晚风中摇曳。行至暗处，才终于寻得几许月光。月光如流水般轻盈，静静地从树叶的夹缝中滑落下来，洒在地上，仿佛给周围的树木都披上了一层薄纱。突然想到苏轼的诗词，“何处无月，何处无竹柏，但少闲人如吾两人耳”，此刻倒是羡慕起他来，虽已成闲人，毕竟还有人可以共赏这月色。</p>
<p>抬头望向那月亮，月光流转千年，见证了无数的历史变迁，兴衰荣辱，此时此刻，却仍旧安安静静地在夜空中凝视着这一切，让我觉得沧桑而又孤傲。细细想来，我也只是这历史长河里茫茫众生中的一个，无法超脱于世，不禁又想到王国维的那句“试上高峰窥皓月，偶开天眼觑红尘，可怜身是眼中人”，好一个“可怜身是眼中人”，让词人苦闷又无奈的情绪跃然纸上。但这一切就应如此，或只能如此了吗。我想，关于人生的这道题，也许还有其他解法。</p>
<p>白日里看到一些关于笛卡尔“我思故我在”的文章，觉得很有意思，于是又回味起来。</p>
<p>笛卡尔是一位很有意思的哲学家，他主张怀疑一切，对自己所学的一切都表示怀疑，他认为一切知识都是不可靠的，因为它们都建立在不可靠的基础之上。但他并不是怀疑论者，而是希望为怀疑论找到一个答案，希望在一切怀疑中找到绝对可靠的“阿基米德点”。他构思了一个有趣的思想实验，如果有一个邪恶的魔鬼，可以让我们产生各种幻觉，包括我们所见所闻所知所感，甚至连最简单的事物也可以欺骗我们，甚至可以让我们以为一加一等于三，而且不会发现这其实是错的，那有没有什么是它绝对不可能骗过我们的，有没有什么事情是绝对不可怀疑的。就像盗梦空间里的梦境，我们如何知道自己是否身处梦境，是否能找到那只陀螺？又如同黑客帝国里，我们怎么知道自己是不是被连在一台巨大的超级计算机背后，我们所有的感觉也许只是计算机生成的指令，有没有什么是绝对正确的？</p>
<p>“我思故我在”便是笛卡尔给出的答案，即使所见所闻都是假象，至少有一事无论如何都是真的，那便是“我在思考”，这便证明作为思考主体的我必定也存在，当然，这里说的“我”并不是指作为客观身体而存在的我，而是作为精神主体而存在的我。很多人对这句话都有着误解，把“故”理解成了“所以”，于是“我思”成了“我在”的原因，更有甚者，甚至说出“不思考便不存在”这样的荒诞逻辑。这两者都犯了逻辑错误，“我在思考，所以我存在”和“我在思考，证明我存在”，这两个解释听起来没什么区别，但再仔细品品，“所以”如果用“导致”来替换的话，区别就能比较明显的看出来了，看看下面这个例子：“我午饭吃了很多，证明我很饿”，“我吃了很多”确实可以作为“我很饿”的证据，但如果换成“我午饭吃了很多，所以我很饿”，从逻辑上就不对了，“我午饭吃了很多”并不少导致“我很饿”的原因，它们并不是因果关系，“我饿”在先，“吃很多”在后。同样，“我思”并不是“我在”的原因，“我在”也并不是“我思”的结果，而是“我思”能证明“我在”，“我在”在先，“我思”在后。至于“不思考便不存在”更是逻辑错的离谱，举个例子，“湖南人是人”这个命题是正确的，但“不是湖南人便不是人”这个命题显然就错的有些嚣张了。</p>
<p>这样咬文嚼字似乎略显无趣，但有时为了追寻真理，却不得不如此。</p>
<p>我曾经也有一段时间经常有这样的困惑，认为我所知道的一切不过是建立在不可靠的认识之下的，我所见所闻未必为真，我看到的也许只是故事的某个片段，甚至不排除是被人刻意剪辑过具有误导性的片段，就此得出的知识经验实在难说有什么价值。在这种思想的影响下，我对身边的一切都产生着怀疑，并怀疑真理是否真的存在，求知是否还有意义。经过一番思索，我终于给出了自己的答案。</p>
<p>我必须承认我所有的知识都有可能是错误的，也许只是真实世界经过某种转换后出现在我心中的映射，所以我接受它随时会被驳倒的可能性，但只要它能很好的服务于当下，并且没有有力的证据表明其错误时，我便仍旧能够相信它。也许我确实只是一个缸中之脑，所有的一切都是虚幻，但如果没有足够的证据来支持，这个只会让我徒增烦恼的猜想便不再有什么意义。当然，由于对这个世界没有足够的了解，有些事也许确实跟我所理解的不一样，我所理解的世界跟真实的世界也许是两回事，所以需要不断去探索和学习，才能了解更多关于这个世界的真相。活在当下，便是我的选择。</p>
<p>说回当下，老实说，今年的状态一直很差劲。也许是因为失去了情感的寄托，生活少了很多乐趣和期待，学习上也懈怠了，从博客更新的频率便可以看出。一直想方设法想要调整，也试图通过减肥来转移注意力。虽然在两个月的时间里，成功减掉了二十多斤，但仍旧没有找到生活的激情。以前我总以为只要足够努力，便能过上想要的生活。但仔细想想，我对于理想生活的构想其实还很模糊，对于自己追求的事物都尚未确定，又怎么知道该如何努力，如何选择。所以我决定放慢脚步，多思考问题的本质，尝试更多的可能性。人类的存在也许并没有什么意义，但我相信每个人的生活各有各的意义。</p>
<p>一阵清风吹过，把我从无尽的思绪中拉回现实。月光如水，依旧流淌怀中，我轻叹一声，捧了一捧月光，一饮而尽。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2020/11/01/thoughts/cogito-ergo-sum/" data-id="ckjjnjnce000oa8wcabuqcm2i" data-title="【周末随想】我思故我在" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/Thoughts/" rel="tag">Thoughts</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-thoughts/why-are-we-biased" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2020/05/31/thoughts/why-are-we-biased/" class="article-date">
  <time class="dt-published" datetime="2020-05-31T12:00:50.000Z" itemprop="datePublished">2020-05-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2020/05/31/thoughts/why-are-we-biased/">【聊聊认知】你以为你以为的就是你以为的吗</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这周是双休，时间比较充裕，睡睡懒觉后发现还有时间，便想写写文章，来对前段时间的思考做一个总结。</p>
<p>似乎是从知识付费兴起之后，<code>认知</code>这个词便开始成为了热门词汇，似乎只要谈到<code>认知</code>，便能将自身高度提升一个档次。</p>
<p>刚来上海的时候，还是一个愣头青（虽然一直都是），对<code>认知</code>这种东西嗤之以鼻，觉得不过是资本主义用来收割年轻韭菜的迷魂汤，但后来经历的一些事，改变了我的看法。其中有一件事让我记忆犹新。</p>
<p>时间回到2018年，那时的创业新风口是带有大数据和人工智能加持的<em>新零售</em>，而我也刚好进入了一家做新零售的创业公司，在货架组做着后端开发的工作。</p>
<p>一天，朋友约我一起吃饭，在吃饭聊天时，相互寒暄了近况，我说我在的公司是做<em>新零售</em>的，朋友对此似乎很感兴趣，并说了很多关于<em>新零售</em>的见解，大数据、推荐算法、人工智能、用户画像等等名词顺手捏来，当我听得一头雾水时，朋友问我有什么看法，我却支支吾吾的说道，我们做的不就是把货架铺到人家公司里，让商品离人更近一点，缩短商品的最后一公里，然后再弄一个小程序入口给用户使用，不就这么多东西吗。可想而知，最后只得跟朋友面面相觑。</p>
<p>现在想来，当时我对于自己所从事行业的认识确实有失偏颇，只知道<em>新零售</em>是当时热门的风口，大家都在讨论，大家都觉得这个行业前途无量，而离它太近却反而看不到它的全貌，只见树木不见森林。但这也跟我并没有主动去思考这件事有着莫大的关系。那天的聊天，让我逐渐意识到自己的思维定势和盲区，而且不仅仅是工作，对于生活中其它很多事情，关于未来的思考，也是如此。我想，要是一直这样下去，恐怕真要做一辈子低阶码农了。</p>
<p>于是，我便开始认真对待提升<code>认知</code>这件事了。</p>
<p>把我领进门的第一本书，应该算是<code>成甲</code>老师的《好好学习》，学习了关于如何管理个人知识的方法论。里面有几处提到了<code>万维钢</code>老师的《精英日课》，于是我又去学习了这门课程，万老师的《精英日课》里会讲解历史上重要的科学发现和现在最前沿的科学理论，也会挑一些有意思的书来进行讲解，极大的扩展了我的认知视野。其中万老师讲解的一本书让我觉得很有意思，那便是以色列作家<code>尤瓦尔赫拉利</code>的《人类简史》，听完后觉得不过瘾，于是又找到书来读。这本书可以说给予了我极大的震惊，让我发现原来我生活的世界并不是像我以为的那样，就像万老师所说，<strong>“你有你的计划，世界另有计划”</strong>。而且，我发现，如果思考一些比我自身更大的事物时，生活中那些繁琐的小事便显得不足一提，很多烦恼也随之消失。</p>
<p>我想，不能在将来被这个世界所抛弃，我必须知道这个世界正在发生什么，未来最有可能的方向是什么。于是我找了更多的书和课程来学习，也不断提升自己认知的高度。过年回家跟好友聊天时，他说，你好像成熟了许多，我微笑着，因为我知道这一切是怎么发生的。</p>
<p>说了这么多废话，无非是想表达<code>认知</code>这个东西确实很重要。下面是我关于“<code>认知</code>是什么”以及“<code>认知偏差</code>是如何产生的”这两件事的一些见解和总结，希望也能对你有所帮助。</p>
<h2 id="什么是认知"><a href="#什么是认知" class="headerlink" title="什么是认知"></a>什么是认知</h2><blockquote>
<p><code>认知</code>是指人们<strong>获得知识</strong>或<strong>应用知识</strong>的过程，或<strong>信息加工</strong>的过程，这是人的最基本的心理过程。它包括<em>感觉</em>、<em>知觉</em>、<em>记忆</em>、<em>思维</em>、<em>想像</em>和<em>语言</em>等。人脑接受外界输入的信息，经过头脑的加工处理，转换成内在的心理活动，进而支配人的行为，这个过程就是<strong>信息加工</strong>的过程，也就是<code>认知过程</code>。（来自<code>百度百科</code>）</p>
</blockquote>
<p>简单来说，<code>认知</code>就是我们如何去认识和了解这个世界的过程。我们通过五官感觉来收集信息，然后在大脑中进行处理加工，从而产生知识。这是一个看似简单，却极其复杂的过程，涉及到我们人体内的一系列生化神经过程，最终产生出知识，“存储”在我们的大脑中，进而为后续行动提供支持和指导。</p>
<p>我们出生时认知过程其实大同小异，虽然智力水平有高低，不过出类拔萃者总是少数，但成年后形成的认知水平却千差万别。有人说，<em>人与人之间的差距比人与猪之间的差距还大</em>，这里说的差距，其实就是<code>认知</code>上的差距。想要提升<code>自我认知</code>，便需要对<code>认知过程</code>有一个正确的认识。</p>
<p><code>认知过程</code>是我们获取知识的必要手段，而这些知识可以指导我们的生存发展。</p>
<p>如果把从信息中提炼知识的过程比作是从金矿中提取黄金，有的人可以提取出纯度很高的金子，而有人却只能从中得到一堆的杂质。<strong>提升认知，本质上来说，就是提升从复杂信息中筛选提取出有用信息并归纳总结的能力</strong>。</p>
<h2 id="认知偏差"><a href="#认知偏差" class="headerlink" title="认知偏差"></a>认知偏差</h2><p>随着信息技术的发展，我们每天能接触到信息成指数型增加，每天都有无数的信息试图进入我们的视野，这些信息有真有假，质量也参差不齐。</p>
<p>那些以牟利为目的而批量生产的垃圾文章，看似有用却食之无味的鸡汤文，看起来大快人心却误人心智的网络爽文，就像迷魂汤一样，试图麻醉我们的心智，抢占我们的注意力，让我们活在虚无的幻想世界里。更不用说越来越多为了吸引眼球而造谣生事的文章，通过片面截取，东拼西凑，断章取义甚至直接捏造是非，从而推导出看似有趣实则荒谬的结论。</p>
<p>如果你相信了一个错误的观点，从而产生了错误的知识，那么很可能会从这个错误的知识推导出更多错误的知识。<strong>这些错误的知识会像病毒一样会自我繁殖</strong>，占据你的大脑，扰乱你的行为。所以只有掌握正确的炼金法则，才能在这个复杂的世界里找到生存发展之路。</p>
<p>我们每隔一段时间都会检测自己的视力，以对我们的眼镜度数做出调整，来更好的看清这个世界。如果把我们的思想则比作是认知这个世界的眼镜的话，你可曾检测过自己的<code>认知视力</code>？如果眼镜度数不对，那我们对世界的认知也会是模糊失真的。而我们的<code>认知</code>也会指导我们的判断和行为，<strong>错误的认知很可能会带来错误的判断和选择</strong>。</p>
<p>那么我们为什么会产生错误的认知呢？这就跟我们大脑的运行机制有关。</p>
<p>我们大脑的思考框架由两部分组成：<code>系统1</code>和<code>系统2</code>。<code>系统1</code>代指<em>无意识</em>的思考模式，<code>系统2</code>代指<em>有意识</em>进行的思考模式。<code>系统1</code>思考或判断非常快捷，因此我们往往第一时间通过它在脑海中形成主观印象和初步判断。但有时<code>系统1</code>可能得不到结论或是得到错误的结论，因此我们也经常求助<code>系统2</code>进行更为复杂和费力的思考过程，以图补充或纠正系统1。但不等于<code>系统1</code>是感性的、<code>系统2</code>是理性的。实际上<code>系统2</code>经常受到<code>系统1</code>的影响。这种影响可能是正确的，也可能是错误的。而且<code>系统2</code>很懒惰，经常疏于校验，从而无法纠正<code>系统1</code>形成的错误。</p>
<p>当<code>系统1</code>产生的错误被<code>系统2</code>所接受或者<code>系统2</code>犯错时，<code>认知偏差</code>就产生了。</p>
<h2 id="演绎法"><a href="#演绎法" class="headerlink" title="演绎法"></a>演绎法</h2><p>我们认知这个世界主要通过两种方式，<code>演绎法</code>和<code>归纳法</code>。</p>
<p><code>演绎法</code>是使用我们自定的一些客观规律、基本原则和基本假设作为前提，对已知的信息进行加工处理，进一步推演得出未知的结论。</p>
<p>下面是来自维基百科的解释：</p>
<blockquote>
<p><code>演绎推理</code>、<code>正向推理</code>在传统的亚里士多德逻辑中是“结论，可从叫做‘前提’的已知事实，‘必然地’得出的推理”。如果前提为真，则结论必然为真。这区别于溯因推理和归纳推理：它们的前提可以预测出高概率的结论，但是不确保结论为真。<br>“演绎推理”还可以定义为结论在普遍性上不大于前提的推理，或“结论在确定性上，同前提一样”的推理。</p>
</blockquote>
<p>举例来说，如果我们知道明天要下雨，便会做出一个决策，明天出门要带伞。我们把这个简单的决策过程拆解一下：</p>
<blockquote>
<p>基本判断：下雨出门要带伞<br>信息：明天会下雨<br>结论：明天出门要带伞</p>
</blockquote>
<p>再举一个例子，亚里士多德的三段论：</p>
<blockquote>
<p>基本判断：所有人都会死<br>信息：苏格拉底是人<br>结论：苏格拉底会死</p>
</blockquote>
<p>这个过程是一个<code>逻辑推演</code>的过程，<strong>根据基本假设和信息来推断出未知的信息</strong>。</p>
<p>如果你看过《名侦探柯南》或者《福尔摩斯》等侦探题材的小说或电影，一定会对侦探们对逻辑推理的巧妙运用留下深刻印象。</p>
<p>演绎法看似严谨，但对于普通人来说，其实每一步都有可能会出错，从而导致<code>认知偏差</code>的出现。</p>
<p>首先，<strong>我们用作前提的基本假设和原则也许来源于人云亦云或当下流行的观点</strong>。比如“仗义每逢屠狗辈，负心多是读书人”，“长得帅的人通常性格不好”，“渣男锡纸烫，渣女大波浪”，这些简单粗暴而又朗朗上口，能迎合内心意淫想法的观点很容易在不经意间溜进我们的思想。</p>
<p>其次，<strong>基本规律可能来自于我们的生活经验总结</strong>，而由于我们生活范围和经历有限，加上我们以自我为中心的心理因素，总结出的基本规律也许只是小范围内有效，甚至可能完全无效。</p>
<p>另外，<strong>我们得到的信息可能并不准确甚至完全是错的</strong>。你也许只是在跟朋友聊天时听朋友随口说了一句天气情况，而他可能看错了日期。更何况天气还隐含了概率的因素，即使是大概率事件也不代表一定会发生。</p>
<p>最后，我们在<strong>推演结论的过程中可能会因为逻辑错误而得出错误的结论</strong>。比如：“美国人会说英语，Alice 会说英语，所以 Alice 是美国人”，“你喜欢用苹果手机，而苹果手机很贵，所以你喜欢用很贵的东西”，这些让人很容易疏忽的常见的<code>逻辑谬误</code>也是产生<code>认知偏差</code>的重要原因。</p>
<h2 id="归纳法"><a href="#归纳法" class="headerlink" title="归纳法"></a>归纳法</h2><p>说完了<code>演绎法</code>再来看看<code>归纳法</code>。</p>
<p><code>演绎法</code>的推演过程是<strong>由一般到特殊</strong>，而<code>归纳法</code>恰好相反。<code>归纳法</code>是<strong>对事物进行归纳总结，从普遍的现象中总结出一般性的结论</strong>。</p>
<p>下面解释来自维基百科：</p>
<blockquote>
<p><code>归纳法</code>或<code>归纳推理</code>，有时叫做<code>归纳逻辑</code>，是论证的前提支持结论但不确保结论的推理过程。它基于对特殊的代表的有限观察，把性质或关系归结到类型；或基于对反复再现的现象的模式的有限观察，公式表达规律。</p>
</blockquote>
<p>举个例子：</p>
<blockquote>
<p>冰是冷的。<br>弹子球在击打球杆的时候移动。</p>
</blockquote>
<p>推断出普遍的命题如：</p>
<blockquote>
<p>所有冰都是冷的。<br>所有弹子球都在击打球杆的时候移动。</p>
</blockquote>
<p>正如你看到的那样，归纳法很容易出现过度普遍化的情况，我们经常会根据我们观察到的有限例子具有某种特性，便轻率的得出其它事物也具有相同特性的结论。</p>
<p>举个很常见的例子，很多人都会说，“湖南人都喜欢吃辣”，于是遇到像我这样不那么喜欢吃辣的湖南人时，反而会质问我，“你到底是不是湖南人”。他们似乎把“大多数”这个词给省略掉了，“大多数湖南人喜欢吃辣”不代表“所有湖南人都喜欢吃辣”。而且这个大多数也仅仅是观测到的结果，具体比例也并没有数据支撑。</p>
<p>（关于吃辣，我刚好在一席上发现了一个很有意思的视频，可以消除一些大家对于辣椒的误解，大家有兴趣也可以看看：<a target="_blank" rel="noopener" href="https://yixi.tv/speech/831%E3%80%82%EF%BC%89">https://yixi.tv/speech/831。）</a></p>
<p>还有一个更出名的例子，那便是<code>黑天鹅</code>，这也是塔勒布的<code>《黑天鹅》</code>一书中所阐述的主要概念。</p>
<blockquote>
<p>在18世纪欧洲人发现澳洲之前，由于他们所见过的天鹅都是白色的，所以在当时欧洲人眼中，天鹅只有白色的品种。直到欧洲人发现了澳洲，看到当地的黑天鹅后，人们认识天鹅的视野才打开，只需一个黑天鹅的观察结果就能使从无数次对白天鹅的观察中归纳推理出的一般结论失效，引起了人们对认知的反思－以往认为对的不等于以后总是对的。“黑天鹅”隐喻那些意外事件：它们极为罕见，在通常的预期之外，在发生前，没有任何前例可以证明，但一旦发生，就会产生极端的影响。</p>
</blockquote>
<p><code>归纳推理</code>过程中也<strong>很容易由于样本的有限性和特殊性而导致统计偏差，得出一些错误的结论</strong>。比如<code>幸存者偏差</code>、<code>辛普森悖论</code>、<code>选择性偏差</code>、<code>伯克森悖论</code>等等，关于这些统计偏差，后面会有文章来做更详细的说明，这里就不展开讨论了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>看完上面的说明，我们的<code>认知体系</code>似乎显得有些弱不经风。但事实上并非如此，<strong>我们的认知是能够在成长过程中不断学习进化的</strong>，能够调整和提升认知的人便有机会取得更多的资源，机会来临时也更容易抓住。而认知有限的人，在发展到一定程度后，认知水平就会成为成长的瓶颈，很难取得更高的成就。有一句话说的好，你只能赚到你认知水平范围内的钱，凭运气赚的钱，迟早会凭本事亏掉。</p>
<p>也许你还是会问，这跟我们在现实生活中看到的似乎又不太一样。为什么有些学习差的人反而赚了大钱，而很多大学生却只能碌碌无为的度过一生？难道大学生的认知水平反而更低吗？</p>
<p>如果你问出这样的问题，显然又掉入了<code>幸存者偏差</code>的陷进里，那些学习不好，过得也很差的人并没有出现在你的视野里，而那些学习成绩好也取得了巨大成就的人也被你选择性忽略掉了。<strong>因为他们的新闻和传播阈值都比较低，反常的事物更容易吸引人目光和注意</strong>。</p>
<p>既然我们的认知如此脆弱，那我们该怎么做呢？我觉得可以从这几个方面入手改善：</p>
<ol>
<li><strong>放平心态，认清现实</strong>。</li>
</ol>
<p>如果你跟我一样，也发现自己的认知水平亟待提高，那么承认并接受这个事实，然后摆平心态，是我们必须做的一步。接受事实是改变的第一步。如果拒绝承认，每次提及都主动回避，进入自我保护姿态，那改变就无从谈起了。</p>
<ol start="2">
<li><strong>多结交优秀的朋友</strong>。</li>
</ol>
<p>如果你身边都是跟你一样，甚至不如你的人，那你可能会沉溺在虚无的自我满足中。与优秀的人为伍，并努力让自己跟上他们的脚步，学习他们思考的方式。“想要得到某样东西的最好方法，就是让自己配得上它”，所以需要努力提升自我并向他们靠近。这里有一个很容易陷入的心理陷进，对于优秀的人，近的会嫉妒，远的会羡慕；够得着的会嫉妒，够不着的会羡慕。想要加入他们的队伍，就必须先克服这样的心理状态。</p>
<ol start="3">
<li><strong>分清事实和观点</strong>。</li>
</ol>
<p>无论是交流还是阅读，我们很容易把观点和事实混为一谈，但大部分时候，它们都有着明显的边界。关于事实，我们不应该产生争论和分歧，而关于观点，我们可以相互交流探讨。很多时候，我们就是因为把二者混为一谈，导致产生偏见和谬误。</p>
<ol start="4">
<li><strong>多阅读，努力提升自我认知</strong>。</li>
</ol>
<p>这也是我觉得最有效，最直接的方式。多看看那些优秀前辈们写的书，可以从中得到不少启发。比如<code>尤瓦尔赫拉利</code>的<code>《人类简史》</code>、<code>《今日简史》</code>和<code>《未来简史》</code>，塔勒布的<code>《黑天鹅》</code>、<code>《随机漫步的傻瓜》</code>、<code>《反脆弱》</code>、<code>《非对称风险》</code>，<code>丹尼尔卡尼曼</code>的<code>《思考，快与慢》</code>，这类的书籍很多，多加阅读可以增加对自我和世界的认知。</p>
<p><strong>活到老，学到老</strong>，未来的世界还会有很多新鲜的事，只要活得足够久，就会遇到各种情况，如何再这个复杂多变的世界里坦然应对可能来临的变化，我想你心中已有了答案。所以，一起加油吧！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2020/05/31/thoughts/why-are-we-biased/" data-id="ckjjnjndt0045a8wc3zi30zlp" data-title="【聊聊认知】你以为你以为的就是你以为的吗" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/Thoughts/" rel="tag">Thoughts</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hexo/hexo-theme" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/breeze-blog/2020/05/04/hexo/hexo-theme/" class="article-date">
  <time class="dt-published" datetime="2020-05-04T01:40:14.000Z" itemprop="datePublished">2020-05-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/breeze-blog/2020/05/04/hexo/hexo-theme/">【Hexo】使用Hexo+github pages+travis ci搭建好看的个人博客（三）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>前两篇文章介绍了 <code>Hexo</code> + <code>github pages</code> + <code>travis ci</code> 进行自动化部署，并介绍了 <code>Hexo</code> 的配置文件中的各个属性，相信通过前两篇文章的学习，你已经学会了如何搭建自己的博客，并能够根据自己的需要进行个性化配置。</p>
<p>这一篇将以 <code>Matery</code> 这款主题为例，说明一下主题应该如何配置。包括主题配置、插件设置、注意事项等。</p>
<h2 id="设置博客主题"><a href="#设置博客主题" class="headerlink" title="设置博客主题"></a>设置博客主题</h2><p>先到<a target="_blank" rel="noopener" href="https://hexo.io/themes/">这里</a> 选择你喜欢的主题，点击它的标题（注意，点图片是进去 <em>demo</em> 站点，点标题才是跳转到对应到 <em>github</em> 仓库），跳转到 <em>github</em> 仓库，复制其仓库地址。</p>
<p>比如我使用到主题是 <code>Matery</code> ，其项目地址为：<code>git@github.com:blinkfox/hexo-theme-matery.git</code>。</p>
<p>打开本地目录，来到与我们的博客项目同级的目录（注意是同级，不是在博客项目内部），将主题项目克隆到本地。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:blinkfox/hexo-theme-matery.git</span><br></pre></td></tr></table></figure>
<p>在博客项目下的 <em>themes</em> 文件夹里新建一个叫 <em>matery</em> 的文件夹，然后将主题文件复制到这个文件夹里：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir breeze-blog/themes/matery</span><br><span class="line">cp -r hexo-theme-matery/* breeze-blog/themes/matery</span><br></pre></td></tr></table></figure>
<p>这里的 <em>breeze-blog</em> 是我的博客项目所在的文件夹，这里替换成你的即可。</p>
<p>再次打开我们的配置文件(<em>_config.yml</em>)，修改 <em>theme</em> 属性，设置为博客主题所在的文件夹名，这里即为 <em>matery</em>，注意要与文件夹名称完全一致。</p>
<p>然后我们重新生成一下博客静态文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> breeze-blog</span><br><span class="line">hexo clean &amp;&amp; hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>然后再打开我们的博客地址：<code>localhost:4000</code>，我们的主题便设置好了。</p>
<p><img src="https://i.loli.net/2020/05/04/YKwFax1NrtVL6Zo.jpg" alt="hexo-theme-1.jpg"></p>
<p>但现在大部分信息都是默认数据，所以我们需要根据需要进行自定义设置，不同主题的配置文件都不太一样，因此设置方法也有所不同，这里仅介绍 <code>Matery</code> 主题的设置方法。</p>
<h2 id="主题内容自定义"><a href="#主题内容自定义" class="headerlink" title="主题内容自定义"></a>主题内容自定义</h2><h3 id="新建页面"><a href="#新建页面" class="headerlink" title="新建页面"></a>新建页面</h3><p>如果你点击首页最上面的那一栏，会发现很多页面打开是没有的，因为我们还没有创建对应的页面，所以需要先创建对应的页面。</p>
<p><img src="https://i.loli.net/2020/05/04/9o7sjVdBMcm24TP.jpg" alt="hexo-theme-2.jpg"></p>
<p>先新建分类 <code>categories</code> 页，<code>categories</code> 页是用来展示所有分类的页面，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;categories&quot;</span></span><br></pre></td></tr></table></figure>
<p>编辑新建的页面文件 <em>/source/categories/index.md</em>，写入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2020-05-04 10:40:13</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">layout: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>然后新建标签 <code>tags</code> 页，<code>tags</code> 页是用来展示所有标签的页面，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;tags&quot;</span></span><br></pre></td></tr></table></figure>
<p>编辑新建的页面文件 <em>/source/tags/index.md</em>，写入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">date: 2020-05-04 10:40:14</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">layout: &quot;tags&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>接下来是新建 <code>about</code> 页，<code>about</code> 页是用来展示关于我和我的博客信息的页面，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;about&quot;</span></span><br></pre></td></tr></table></figure>
<p>编辑新建的页面文件 <code>/source/about/index.md</code>，写入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: about</span><br><span class="line">date: 2020-05-04 10:40:15</span><br><span class="line">type: &quot;about&quot;</span><br><span class="line">layout: &quot;about&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>然后新建留言板 <code>contact</code> 页，<code>contact</code> 页是用来展示留言板信息的页面，方便其他人进行统一留言，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;contact&quot;</span></span><br></pre></td></tr></table></figure>
<p>编辑新建的页面文件 <em>/source/contact/index.md</em>，写入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: contact</span><br><span class="line">date: 2020-05-04 10:40:16</span><br><span class="line">type: &quot;contact&quot;</span><br><span class="line">layout: &quot;contact&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>注意，留言板功能依赖于第三方评论系统，需要先激活评论系统才有效果，如果嫌麻烦不想使用，也可以不处理，后面在菜单栏里去掉这一选项即可。</p>
<p>最后，新建友情链接 <code>friends</code> 页，<code>friends</code> 页是用来展示友情链接信息的页面，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;friends&quot;</span></span><br></pre></td></tr></table></figure>
<p>编辑新建的页面文件 <em>/source/friends/index.md</em>，写入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: friends</span><br><span class="line">date: 2020-05-04 10:40:17</span><br><span class="line">type: &quot;friends&quot;</span><br><span class="line">layout: &quot;friends&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>同时，在你的博客 <code>source</code> 目录下新建 <em>_data</em> 目录，在 <em>_data</em> 目录中新建 <em>friends.json</em> 文件，文件内容如下所示：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">    <span class="attr">&quot;avatar&quot;</span>: <span class="string">&quot;https://mfrank2016.github.io/breeze-blog/medias/avatar.jpg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;清风&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;introduction&quot;</span>: <span class="string">&quot;技术博主，文章还不错&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://mfrank2016.github.io/breeze-blog/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;前去学习&quot;</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">&quot;avatar&quot;</span>: <span class="string">&quot;https://draveness.me/images/draven-logo.png&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;真没什么逻辑&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;introduction&quot;</span>: <span class="string">&quot;面向信仰编程&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://draveness.me/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;前去学习&quot;</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<p>这里可以根据需要进行删减，当然，要看效果可以先这样设置，之后再来修改也不迟。</p>
<p>新建完页面后，我们再重新生成一下博客静态页，然后运行一下项目，便能看到效果了。这里标签页和分类页都只会展示现有博客的标签和分类数据，所以如果还没有文章设置标题或者分类，那么对应页面是没有数据的。要想看到效果，就得先写几篇文章。</p>
<h3 id="菜单导航配置"><a href="#菜单导航配置" class="headerlink" title="菜单导航配置"></a>菜单导航配置</h3><h4 id="配置基本菜单导航的名称、路径url和图标icon"><a href="#配置基本菜单导航的名称、路径url和图标icon" class="headerlink" title="配置基本菜单导航的名称、路径url和图标icon."></a>配置基本菜单导航的名称、路径url和图标icon.</h4><p>1.菜单导航名称可以是中文也可以是英文(如：<code>Index</code>或<code>主页</code>) 2.图标icon 可以在<a target="_blank" rel="noopener" href="https://fontawesome.com/icons">Font Awesome</a> 中查找</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">Index:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">Tags:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/tags</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">Categories:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/categories</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bookmark</span></span><br><span class="line">  <span class="attr">Archives:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/archives</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="attr">About:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/about</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-user-circle</span></span><br><span class="line">  <span class="attr">Friends:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/friends</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-address-book</span></span><br></pre></td></tr></table></figure>
<h4 id="二级菜单配置方法"><a href="#二级菜单配置方法" class="headerlink" title="二级菜单配置方法"></a>二级菜单配置方法</h4><p>如果你需要二级菜单则可以在原基本菜单导航的基础上如下操作<br>1.在需要添加二级菜单的一级菜单下添加<code>children</code>关键字(如:<code>About</code>菜单下添加<code>children</code>)<br>2.在<code>children</code>下创建二级菜单的 名称name,路径url和图标icon.<br>3.注意每个二级菜单模块前要加 <code>-</code>.<br>4.注意缩进格式</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">Index:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">Tags:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/tags</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">Categories:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/categories</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bookmark</span></span><br><span class="line">  <span class="attr">Archives:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/archives</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="attr">About:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/about</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-user-circle-o</span></span><br><span class="line">  <span class="attr">Friends:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/friends</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-address-book</span></span><br><span class="line">  <span class="attr">Medias:</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-list</span></span><br><span class="line">    <span class="attr">children:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Musics</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/musics</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Movies</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/movies</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-film</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Books</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/books</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-book</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Galleries</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/galleries</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-image</span></span><br></pre></td></tr></table></figure>
<p>执行 <code>hexo clean &amp;&amp; hexo g</code> 重新生成博客文件，然后就可以在文章中对应位置看到你用<code>emoji</code>语法写的表情了。</p>
<h3 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h3><p>由于 Hexo 自带的代码高亮主题显示不好看，所以主题中使用到了 <a target="_blank" rel="noopener" href="https://github.com/ele828/hexo-prism-plugin">hexo-prism-plugin</a> 的 Hexo 插件来做代码高亮，安装命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -S hexo-prism-plugin</span><br></pre></td></tr></table></figure>
<p>然后，修改 Hexo 根目录下 <code>_config.yml</code> 文件中 <code>highlight.enable</code> 的值为 <code>false</code>，并新增 <code>prism</code> 插件相关的配置，主要配置如下：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">prism_plugin:</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">&#x27;preprocess&#x27;</span>    <span class="comment"># realtime/preprocess</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">&#x27;tomorrow&#x27;</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span>    <span class="comment"># default false</span></span><br><span class="line">  <span class="attr">custom_css:</span></span><br></pre></td></tr></table></figure>
<h3 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h3><p>主题中还使用到了 <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search">hexo-generator-search</a> 的 Hexo 插件来做内容搜索，安装命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure>
<p>在 Hexo 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br></pre></td></tr></table></figure>
<p>效果图如下：</p>
<p><img src="https://i.loli.net/2020/05/04/RrE3pQdq9CmtcTP.jpg" alt="hexo-theme-3.jpg"></p>
<h3 id="中文链接转拼音（建议安装）"><a href="#中文链接转拼音（建议安装）" class="headerlink" title="中文链接转拼音（建议安装）"></a>中文链接转拼音（建议安装）</h3><p>如果你的文章名称是中文的，那么 <em>Hexo</em> 默认生成的永久链接也会有中文，这样不利于 <code>SEO</code>，且 <code>gitment</code> 评论对中文链接也不支持。我们可以用 <a target="_blank" rel="noopener" href="https://github.com/viko16/hexo-permalink-pinyin">hexo-permalink-pinyin</a> <em>Hexo</em> 插件使在生成文章时生成中文拼音的永久链接。</p>
<p>安装命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-permalink-pinyin --save</span><br></pre></td></tr></table></figure>
<p>在 <em>Hexo</em> 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink_pinyin:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">separator:</span> <span class="string">&#x27;-&#x27;</span> <span class="comment"># default: &#x27;-&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="文章字数统计插件（建议安装）"><a href="#文章字数统计插件（建议安装）" class="headerlink" title="文章字数统计插件（建议安装）"></a>文章字数统计插件（建议安装）</h3><p>如果你想要在文章中显示文章字数、阅读时长信息，可以安装 <a target="_blank" rel="noopener" href="https://github.com/willin/hexo-wordcount">hexo-wordcount</a>插件。</p>
<p>安装命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save hexo-wordcount</span><br></pre></td></tr></table></figure>
<p>然后只需在本主题下的 <code>_config.yml</code> 文件中，将各个文章字数相关的配置激活即可：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">postInfo:</span></span><br><span class="line">  <span class="attr">date:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">update:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">wordCount:</span> <span class="literal">true</span> <span class="comment"># 设置文章字数统计为 true.</span></span><br><span class="line">  <span class="attr">totalCount:</span> <span class="literal">true</span> <span class="comment"># 设置站点文章总字数统计为 true.</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span> <span class="comment"># 阅读时长.</span></span><br><span class="line">  <span class="attr">readCount:</span> <span class="literal">true</span> <span class="comment"># 阅读次数.</span></span><br></pre></td></tr></table></figure>
<h3 id="添加emoji表情支持（可选的）"><a href="#添加emoji表情支持（可选的）" class="headerlink" title="添加emoji表情支持（可选的）"></a>添加emoji表情支持（可选的）</h3><p><em>Matery</em> 主题新增了对<code>emoji</code>表情的支持，使用到了 <a target="_blank" rel="noopener" href="https://npm.taobao.org/package/hexo-filter-github-emojis">hexo-filter-github-emojis</a> 的 Hexo 插件来支持 <code>emoji</code>表情的生成，把对应的<code>markdown emoji</code>语法（<code>::</code>,例如：<code>:smile:</code>）转变成会跳跃的<code>emoji</code>表情，安装命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-filter-github-emojis --save</span><br></pre></td></tr></table></figure>
<p>在 <em>Hexo</em> 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">githubEmojis:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">className:</span> <span class="string">github-emoji</span></span><br><span class="line">  <span class="attr">inject:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">styles:</span></span><br><span class="line">  <span class="attr">customEmojis:</span></span><br></pre></td></tr></table></figure>
<h3 id="添加-RSS-订阅支持（可选的）"><a href="#添加-RSS-订阅支持（可选的）" class="headerlink" title="添加 RSS 订阅支持（可选的）"></a>添加 RSS 订阅支持（可选的）</h3><p>主题中还使用到了 <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a> 的 Hexo 插件来做 <code>RSS</code>，安装命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>
<p>在 <em>Hexo</em> 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">hub:</span></span><br><span class="line">  <span class="attr">content:</span></span><br><span class="line">  <span class="attr">content_limit:</span> <span class="number">140</span></span><br><span class="line">  <span class="attr">content_limit_delim:</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br></pre></td></tr></table></figure>
<p>执行 <code>hexo clean &amp;&amp; hexo g</code> 重新生成博客文件，然后在 <code>public</code> 文件夹中即可看到 <code>atom.xml</code> 文件，说明你已经安装成功了。</p>
<h3 id="添加-DaoVoice-在线聊天功能（可选的）"><a href="#添加-DaoVoice-在线聊天功能（可选的）" class="headerlink" title="添加 DaoVoice 在线聊天功能（可选的）"></a>添加 <a target="_blank" rel="noopener" href="http://www.daovoice.io/">DaoVoice</a> 在线聊天功能（可选的）</h3><p>前往 <a target="_blank" rel="noopener" href="http://www.daovoice.io/">DaoVoice</a> 官网注册并且获取 <code>app_id</code>，并将 <code>app_id</code> 填入主题的 <code>_config.yml</code> 文件中。</p>
<h3 id="添加-Tidio-在线聊天功能（可选的）"><a href="#添加-Tidio-在线聊天功能（可选的）" class="headerlink" title="添加 Tidio 在线聊天功能（可选的）"></a>添加 <a target="_blank" rel="noopener" href="https://www.tidio.com/">Tidio</a> 在线聊天功能（可选的）</h3><p>前往 <a target="_blank" rel="noopener" href="https://www.tidio.com/">Tidio</a> 官网注册并且获取 <code>Public Key</code>，并将 <code>Public Key</code> 填入主题的 <code>_config.yml</code> 文件中。</p>
<h3 id="修改社交链接"><a href="#修改社交链接" class="headerlink" title="修改社交链接"></a>修改社交链接</h3><p>在主题的 <code>_config.yml</code> 文件中，默认支持 <code>QQ</code>、<code>GitHub</code> 和邮箱等的配置，你可以在主题文件的 <code>/layout/_partial/social-link.ejs</code> 文件中，新增、修改你需要的社交链接地址，增加链接可参考如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.socialLink.github) &#123; %&gt;</span><br><span class="line">    &lt;a href&#x3D;&quot;&lt;%&#x3D; theme.socialLink.github %&gt;&quot; class&#x3D;&quot;tooltipped&quot; target&#x3D;&quot;_blank&quot; data-tooltip&#x3D;&quot;访问我的GitHub&quot; data-position&#x3D;&quot;top&quot; data-delay&#x3D;&quot;50&quot;&gt;</span><br><span class="line">        &lt;i class&#x3D;&quot;fab fa-github&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">    &lt;&#x2F;a&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
<p>其中，社交图标（如：<code>fa-github</code>）你可以在 <a target="_blank" rel="noopener" href="https://fontawesome.com/icons">Font Awesome</a> 中搜索找到。以下是常用社交图标的标识，供你参考：</p>
<ul>
<li>Facebook: <code>fab fa-facebook</code></li>
<li>Twitter: <code>fab fa-twitter</code></li>
<li>Google-plus: <code>fab fa-google-plus</code></li>
<li>Linkedin: <code>fab fa-linkedin</code></li>
<li>Tumblr: <code>fab fa-tumblr</code></li>
<li>Medium: <code>fab fa-medium</code></li>
<li>Slack: <code>fab fa-slack</code></li>
<li>Sina Weibo: <code>fab fa-weibo</code></li>
<li>Wechat: <code>fab fa-weixin</code></li>
<li>QQ: <code>fab fa-qq</code></li>
<li>Zhihu: <code>fab fa-zhihu</code></li>
</ul>
<h3 id="修改打赏的二维码图片"><a href="#修改打赏的二维码图片" class="headerlink" title="修改打赏的二维码图片"></a>修改打赏的二维码图片</h3><p>在主题文件的 <code>source/medias/reward</code> 文件中，可以替换成你的微信和支付宝的打赏二维码图片。</p>
<h3 id="配置音乐播放器（可选的）"><a href="#配置音乐播放器（可选的）" class="headerlink" title="配置音乐播放器（可选的）"></a>配置音乐播放器（可选的）</h3><p>要支持音乐播放，在主题的 <code>_config.yml</code> 配置文件中激活music配置即可：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 是否在首页显示音乐</span></span><br><span class="line"><span class="attr">music:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span>     	    <span class="comment">#非吸底模式有效</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">show:</span> <span class="string">听听音乐</span></span><br><span class="line">  <span class="attr">server:</span> <span class="string">netease</span>   <span class="comment">#require music platform: netease, tencent, kugou, xiami, baidu</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">playlist</span>    <span class="comment">#require song, playlist, album, search, artist</span></span><br><span class="line">  <span class="attr">id:</span> <span class="number">503838841</span>     <span class="comment">#require song id / playlist id / album id / search keyword</span></span><br><span class="line">  <span class="attr">fixed:</span> <span class="literal">false</span>      <span class="comment"># 开启吸底模式</span></span><br><span class="line">  <span class="attr">autoplay:</span> <span class="literal">false</span>   <span class="comment"># 是否自动播放</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">&#x27;#42b983&#x27;</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="string">&#x27;all&#x27;</span>       <span class="comment"># 音频循环播放, 可选值: &#x27;all&#x27;, &#x27;one&#x27;, &#x27;none&#x27;</span></span><br><span class="line">  <span class="attr">order:</span> <span class="string">&#x27;random&#x27;</span>   <span class="comment"># 音频循环顺序, 可选值: &#x27;list&#x27;, &#x27;random&#x27;</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="string">&#x27;auto&#x27;</span>   <span class="comment"># 预加载，可选值: &#x27;none&#x27;, &#x27;metadata&#x27;, &#x27;auto&#x27;</span></span><br><span class="line">  <span class="attr">volume:</span> <span class="number">0.7</span>       <span class="comment"># 默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</span></span><br><span class="line">  <span class="attr">listFolded:</span> <span class="literal">true</span>  <span class="comment"># 列表默认折叠</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>server</code>可选<code>netease</code>（网易云音乐），<code>tencent</code>（QQ音乐），<code>kugou</code>（酷狗音乐），<code>xiami</code>（虾米音乐），</p>
<p><code>baidu</code>（百度音乐）。</p>
<p><code>type</code>可选<code>song</code>（歌曲），<code>playlist</code>（歌单），<code>album</code>（专辑），<code>search</code>（搜索关键字），<code>artist</code>（歌手）</p>
<p><code>id</code>获取示例: 打开手机版网易云音乐，选择喜欢的歌单，然后点击分享</p>
</blockquote>
<p>我这里随便选了一个歌单，分享后的文字长这样：</p>
<blockquote>
<p>分享真咸鱼饼干的歌单《青年节：致逐梦人，有志者事竟成》<a target="_blank" rel="noopener" href="http://music.163.com/playlist/4965675848/1548006936/?userid=120124365">http://music.163.com/playlist/4965675848/1548006936/?userid=120124365</a> (@网易云音乐)</p>
</blockquote>
<p><code>4965675848</code> 这就是歌单的id，文件里默认设置的歌单其实也还不错，歌挺多的，所以如果没什么特殊要求，使用默认歌单也不错。</p>
<p>⚠️这里需要注意一点，如果你想要替换成自己的歌单时，会发现，后续歌单的更新是不会影响到它的，这也是我捣鼓半天才发现的，音乐插件使用的是 <em>Aplayer</em> 播放器，在 <em><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js">https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js</a></em> 这个文件里可以看到，数据是从这个接口获取的：<em><a target="_blank" rel="noopener" href="https://api.i-meto.com/meting/api?server=:server&amp;type=:type&amp;id=:id&amp;r=:r">https://api.i-meto.com/meting/api?server=:server&amp;type=:type&amp;id=:id&amp;r=:r</a></em>，猜测服务端是直接将获取到的榜单列表写进里数据库，但后续不会进行更新，所以导致无论多少次刷新，都只能获取第一次取到的数据。</p>
<p>所以有两种解决办法，第一种是创建新歌单，然后一次性添加足够多的歌，然后在配置文件中替换成你的歌单id，另一种是自己写一个网易云音乐歌单解析接口，来获取网易云音乐数据。我比较懒，所以选择了第一种方案，23333，还在充实歌单中。</p>
<h2 id="文章-Front-matter-介绍"><a href="#文章-Front-matter-介绍" class="headerlink" title="文章 Front-matter 介绍"></a>文章 Front-matter 介绍</h2><h3 id="Front-matter-选项详解"><a href="#Front-matter-选项详解" class="headerlink" title="Front-matter 选项详解"></a>Front-matter 选项详解</h3><p><code>Front-matter</code> 选项中的所有内容均为<strong>非必填</strong>的。但建议至少填写 <code>title</code> 和 <code>date</code> 的值。</p>
<table>
<thead>
<tr>
<th>配置选项</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>title</td>
<td><code>Markdown</code> 的文件标题</td>
<td>文章标题，强烈建议填写此选项</td>
</tr>
<tr>
<td>date</td>
<td>文件创建时的日期时间</td>
<td>发布时间，强烈建议填写此选项，且最好保证全局唯一</td>
</tr>
<tr>
<td>author</td>
<td>根 <code>_config.yml</code> 中的 <code>author</code></td>
<td>文章作者</td>
</tr>
<tr>
<td>img</td>
<td><code>featureImages</code> 中的某个值</td>
<td>文章特征图，推荐使用图床(腾讯云、七牛云、又拍云等)来做图片的路径.如: <code>http://xxx.com/xxx.jpg</code></td>
</tr>
<tr>
<td>top</td>
<td><code>true</code></td>
<td>推荐文章（文章是否置顶），如果 <code>top</code> 值为 <code>true</code>，则会作为首页推荐文章</td>
</tr>
<tr>
<td>cover</td>
<td><code>false</code></td>
<td><code>v1.0.2</code>版本新增，表示该文章是否需要加入到首页轮播封面中</td>
</tr>
<tr>
<td>coverImg</td>
<td>无</td>
<td><code>v1.0.2</code>版本新增，表示该文章在首页轮播封面需要显示的图片路径，如果没有，则默认使用文章的特色图片</td>
</tr>
<tr>
<td>password</td>
<td>无</td>
<td>文章阅读密码，如果要对文章设置阅读验证密码的话，就可以设置 <code>password</code> 的值，该值必须是用 <code>SHA256</code> 加密后的密码，防止被他人识破。前提是在主题的 <code>config.yml</code> 中激活了 <code>verifyPassword</code> 选项</td>
</tr>
<tr>
<td>toc</td>
<td><code>true</code></td>
<td>是否开启 TOC，可以针对某篇文章单独关闭 TOC 的功能。前提是在主题的 <code>config.yml</code> 中激活了 <code>toc</code> 选项</td>
</tr>
<tr>
<td>mathjax</td>
<td><code>false</code></td>
<td>是否开启数学公式支持 ，本文章是否开启 <code>mathjax</code>，且需要在主题的 <code>_config.yml</code> 文件中也需要开启才行</td>
</tr>
<tr>
<td>summary</td>
<td>无</td>
<td>文章摘要，自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要</td>
</tr>
<tr>
<td>categories</td>
<td>无</td>
<td>文章分类，本主题的分类表示宏观上大的分类，只建议一篇文章一个分类</td>
</tr>
<tr>
<td>tags</td>
<td>无</td>
<td>文章标签，一篇文章可以多个标签</td>
</tr>
<tr>
<td>keywords</td>
<td>文章标题</td>
<td>文章关键字，SEO 时需要</td>
</tr>
<tr>
<td>reprintPolicy</td>
<td>cc_by</td>
<td>文章转载规则， 可以是 cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint 或 pay 中的一个</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>注意</strong>:</p>
<ol>
<li>如果 <code>img</code> 属性不填写的话，文章特色图会根据文章标题的 <code>hashcode</code> 的值取余，然后选取主题中对应的特色图片，从而达到让所有文章都的特色图<strong>各有特色</strong>。</li>
<li><code>date</code> 的值尽量保证每篇文章是唯一的，因为本主题中 <code>Gitalk</code> 和 <code>Gitment</code> 识别 <code>id</code> 是通过 <code>date</code> 的值来作为唯一标识的。</li>
<li>如果要对文章设置阅读验证密码的功能，不仅要在 Front-matter 中设置采用了 SHA256 加密的 password 的值，还需要在主题的 <code>_config.yml</code> 中激活了配置。有些在线的 SHA256 加密的地址，可供你使用：<a target="_blank" rel="noopener" href="http://tool.oschina.net/encrypt?type=2">开源中国在线工具</a>、<a target="_blank" rel="noopener" href="http://encode.chahuo.com/">chahuo</a>、<a target="_blank" rel="noopener" href="http://tool.chinaz.com/tools/hash.aspx">站长工具</a>。</li>
<li>您可以在文章md文件的 front-matter 中指定 reprintPolicy 来给单个文章配置转载规则</li>
</ol>
</blockquote>
<p>以下为文章的 <code>Front-matter</code> 示例。</p>
<p>最简示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: typora-vue-theme主题介绍</span><br><span class="line">date: 2018-09-07 09:25:00</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>最全示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: typora-vue-theme主题介绍</span><br><span class="line">date: 2018-09-07 09:25:00</span><br><span class="line">author: 赵奇</span><br><span class="line">img: &#x2F;source&#x2F;images&#x2F;xxx.jpg</span><br><span class="line">top: true</span><br><span class="line">cover: true</span><br><span class="line">coverImg: &#x2F;images&#x2F;1.jpg</span><br><span class="line">password: 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92</span><br><span class="line">toc: false</span><br><span class="line">mathjax: false</span><br><span class="line">summary: 这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要</span><br><span class="line">categories: Markdown</span><br><span class="line">tags:</span><br><span class="line">  - Typora</span><br><span class="line">  - Markdown</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>上述大部分内容都来自主题说明文档，只是添加了一下我觉得需要注意的地方。这里还有一些没有说到到的属性，这配置文件里都有详细的介绍，确实不需要过多解释。</p>
<p>最后再介绍一下我折腾比较久的插件，valine 评价插件。</p>
<h2 id="Valine-评价插件"><a href="#Valine-评价插件" class="headerlink" title="Valine 评价插件"></a>Valine 评价插件</h2><p>插件主页：<em><a target="_blank" rel="noopener" href="https://valine.js.org/">https://valine.js.org/</a></em> ，上面有详细的介绍，可以查看<a target="_blank" rel="noopener" href="https://valine.js.org/quickstart.html">这里</a>，注册后，验证邮箱，绑定手机号，然后新建一个应用，获取到对应的 <code>AppId</code> 和 <code>AppKey</code>，然后写回到主题文件下到 <code>_config.yml</code> 文件里，但是要<strong>注意一点，不要直接使用国内版进行注册，而要用国际版，否则无法申请二级域名</strong>。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="string">XXX</span></span><br><span class="line">  <span class="attr">appKey:</span> <span class="string">XXX</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">&#x27;retro&#x27;</span> <span class="comment"># Gravatar style : mm/identicon/monsterid/wavatar/retro/hide</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">&#x27;Comment here&#x27;</span> <span class="comment"># Comment Box placeholder</span></span><br><span class="line">  <span class="attr">background:</span> <span class="string">/medias/comment_bg.png</span></span><br></pre></td></tr></table></figure>
<p>最新版的 <code>Valine</code> 已经移除了邮件通知功能。如果没有邮件通知，很可能别人评价之后，你却毫不知情，后续回复对方也收不到。因此，需要再配置一个插件来实现， ++<a target="_blank" rel="noopener" href="https://github.com/zhaojun1998/Valine-Admin++">https://github.com/zhaojun1998/Valine-Admin++</a> 。在配置这个插件之前，需要确保 <code>Valine</code> 可以正常工作，可以自己给自己评论一下进行测试。</p>
<p>配置好之后，别人在你的文章下评论后你便能收到邮件通知了。</p>
<p>至此，<code>Matery</code> 主题就搭建配置完成了，接下来就只需要安心写博客了～</p>
<p><img src="https://i.loli.net/2020/05/02/AfHOY5RXge9tlVo.png" alt="微信公众号"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://good19961106.github.io/2020/05/04/hexo/hexo-theme/" data-id="ckjjnjndo003ra8wch65wf5vo" data-title="【Hexo】使用Hexo+github pages+travis ci搭建好看的个人博客（三）" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/breeze-blog/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">环境搭建</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/breeze-blog/page/2/">2</a><a class="page-number" href="/breeze-blog/page/3/">3</a><a class="extend next" rel="next" href="/breeze-blog/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/">编程</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a></li><li class="category-list-item"><a class="category-list-link" href="/breeze-blog/categories/%E7%BC%96%E7%A8%8B/%E7%94%9F%E6%B4%BB/">生活</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/DelayQueue/" rel="tag">DelayQueue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/Java%E5%85%A5%E9%97%A8/" rel="tag">Java入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">Java基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/R/" rel="tag">R</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/RabbitMQ/" rel="tag">RabbitMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/Thoughts/" rel="tag">Thoughts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/github-pages/" rel="tag">github pages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/go/" rel="tag">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/travis-ci/" rel="tag">travis ci</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/%E4%BC%98%E9%9B%85%E9%87%8D%E8%AF%95/" rel="tag">优雅重试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" rel="tag">最佳实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/breeze-blog/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">环境搭建</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/breeze-blog/tags/DelayQueue/" style="font-size: 10px;">DelayQueue</a> <a href="/breeze-blog/tags/Hexo/" style="font-size: 12.86px;">Hexo</a> <a href="/breeze-blog/tags/Java/" style="font-size: 20px;">Java</a> <a href="/breeze-blog/tags/Java%E5%85%A5%E9%97%A8/" style="font-size: 18.57px;">Java入门</a> <a href="/breeze-blog/tags/Java%E5%9F%BA%E7%A1%80/" style="font-size: 15.71px;">Java基础</a> <a href="/breeze-blog/tags/R/" style="font-size: 11.43px;">R</a> <a href="/breeze-blog/tags/RabbitMQ/" style="font-size: 14.29px;">RabbitMQ</a> <a href="/breeze-blog/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/breeze-blog/tags/Thoughts/" style="font-size: 11.43px;">Thoughts</a> <a href="/breeze-blog/tags/github-pages/" style="font-size: 10px;">github pages</a> <a href="/breeze-blog/tags/go/" style="font-size: 12.86px;">go</a> <a href="/breeze-blog/tags/travis-ci/" style="font-size: 10px;">travis ci</a> <a href="/breeze-blog/tags/%E4%BC%98%E9%9B%85%E9%87%8D%E8%AF%95/" style="font-size: 10px;">优雅重试</a> <a href="/breeze-blog/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" style="font-size: 10px;">最佳实践</a> <a href="/breeze-blog/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size: 17.14px;">环境搭建</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/breeze-blog/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/breeze-blog/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/breeze-blog/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/breeze-blog/archives/2020/05/">May 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/breeze-blog/2021/01/05/picture/go-draw-word-in-pic2/">(no title)</a>
          </li>
        
          <li>
            <a href="/breeze-blog/2021/01/05/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/breeze-blog/2020/12/20/picture/go-draw-word-in-pic/">【Go语言绘图】图片添加文字（一）</a>
          </li>
        
          <li>
            <a href="/breeze-blog/2020/12/16/picture/go-pic-rotate-use-gg-package/">【Go语言绘图】图片的旋转</a>
          </li>
        
          <li>
            <a href="/breeze-blog/2020/11/29/picture/go-basic-usage-of-gg-package/">【Go语言绘图】gg 库的基本使用</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/breeze-blog/" class="mobile-nav-link">Home</a>
  
    <a href="/breeze-blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/breeze-blog/js/jquery-3.4.1.min.js"></script>



  
<script src="/breeze-blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/breeze-blog/js/script.js"></script>





  </div>
</body>
</html>